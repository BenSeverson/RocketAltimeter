MP2COD 4.12, COFF to COD File Converter
Copyright (c) 2007 Microchip Technology Inc.
Listing File Generated: Mon Aug 20 16:55:41 2007


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.7 2006/11/15 22:53:12 moshtaa Exp $ */                       C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to __init() function */                                    C:\MCC18\src\traditional\startup\c018i.c
                                           extern void __init (void);                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\MCC18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\MCC18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\MCC18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\MCC18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\MCC18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           extern near char __FPFLAGS;                                                      C:\MCC18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
000000   ef46     GOTO      0x1a8c         _asm goto _startup _endasm                                                       C:\MCC18\src\traditional\startup\c018i.c
000002   f00d                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\MCC18\src\traditional\startup\c018i.c
001a8c   ee13     LFSR      0x1,0x300          lfsr 1, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
001a8e   f000                                                                                                               
001a90   ee23     LFSR      0x2,0x300          lfsr 2, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
001a92   f000                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
001a94   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
001a96   9c0f     BCF       0xf,0x6,0x0        bcf __FPFLAGS,RND,0 // Initialize rounding flag for floating point libs      C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
001a98   ec59     CALL      0x18b2,0x0         _do_cinit ();                                                                C:\MCC18\src\traditional\startup\c018i.c
001a9a   f00c                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // If user defined __init is not found, the one in clib.lib will be used       C:\MCC18\src\traditional\startup\c018i.c
001a9c   ec60     CALL      0x1ac0,0x0       __init ();                                                                     C:\MCC18\src\traditional\startup\c018i.c
001a9e   f00d                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\MCC18\src\traditional\startup\c018i.c
001aa0   ec02     CALL      0x1a04,0x0       main ();                                                                       C:\MCC18\src\traditional\startup\c018i.c
001aa2   f00d                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
001aa4   d7fb     BRA       0x1a9c           goto loop;                                                                     C:\MCC18\src\traditional\startup\c018i.c
001aa6   0012     RETURN    0x0            }                               /* end _startup() */                             C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\MCC18\src\traditional\startup\c018i.c
                                             {                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                             }                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\MCC18\src\traditional\startup\c018i.c
                                           }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\MCC18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\MCC18\src\traditional\startup\c018i.c
                                              */                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\MCC18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\MCC18\src\traditional\startup\c018i.c
0018b2   0e2a     MOVLW     0x2a             TBLPTR = (short long)&_cinit;                                                  C:\MCC18\src\traditional\startup\c018i.c
0018b4   6ef6     MOVWF     0xf6,0x0                                                                                        
0018b6   0e08     MOVLW     0x8                                                                                             
0018b8   6ef7     MOVWF     0xf7,0x0                                                                                        
0018ba   0e00     MOVLW     0x0                                                                                             
0018bc   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
0018be   0101     MOVLB     0x1                movlb data_ptr                                                               C:\MCC18\src\traditional\startup\c018i.c
0018c0   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
0018c2   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
0018c4   6f11     MOVWF     0x11,0x1           movwf curr_entry, 1                                                          C:\MCC18\src\traditional\startup\c018i.c
0018c6   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
0018c8   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
0018ca   6f12     MOVWF     0x12,0x1           movwf curr_entry+1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\MCC18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\MCC18\src\traditional\startup\c018i.c
0018cc   e103     BNZ       0x18d4              bnz 3                                                                       C:\MCC18\src\traditional\startup\c018i.c
0018ce   6711     TSTFSZ    0x11,0x1           tstfsz curr_entry, 1                                                         C:\MCC18\src\traditional\startup\c018i.c
0018d0   d001     BRA       0x18d4             bra 1                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
0018d2   d03d     BRA       0x194e             goto done;                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\MCC18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\MCC18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\MCC18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\MCC18\src\traditional\startup\c018i.c
0018d4   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
0018d6   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
0018d8   6f0c     MOVWF     0xc,0x1        	movwf prom, 1                                                                   C:\MCC18\src\traditional\startup\c018i.c
0018da   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
0018dc   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
0018de   6f0d     MOVWF     0xd,0x1        	movwf prom+1, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
0018e0   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
0018e2   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
0018e4   6f0e     MOVWF     0xe,0x1        	movwf prom+2, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\MCC18\src\traditional\startup\c018i.c
0018e6   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
0018e8   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
0018ea   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
0018ec   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
0018ee   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
0018f0   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
0018f2   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
0018f4   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
0018f6   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
0018f8   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
0018fa   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
0018fc   6f0f     MOVWF     0xf,0x1        	movwf curr_byte, 1                                                              C:\MCC18\src\traditional\startup\c018i.c
0018fe   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001900   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001902   6f10     MOVWF     0x10,0x1       	movwf curr_byte+1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
001904   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001906   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\MCC18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\MCC18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\MCC18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
001908   cff6     MOVFF     0xff6,0x113          data_ptr = TBLPTR;                                                         C:\MCC18\src\traditional\startup\c018i.c
00190a   f113                                                                                                               
00190c   cff7     MOVFF     0xff7,0x114                                                                                     
00190e   f114                                                                                                               
001910   cff8     MOVFF     0xff8,0x115                                                                                     
001912   f115                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\MCC18\src\traditional\startup\c018i.c
001914   c10c     MOVFF     0x10c,0xff6          TBLPTR = prom;                                                             C:\MCC18\src\traditional\startup\c018i.c
001916   fff6                                                                                                               
001918   c10d     MOVFF     0x10d,0xff7                                                                                     
00191a   fff7                                                                                                               
00191c   c10e     MOVFF     0x10e,0xff8                                                                                     
00191e   fff8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\MCC18\src\traditional\startup\c018i.c
001920   0101     MOVLB     0x1            	movlb curr_byte                                                                 C:\MCC18\src\traditional\startup\c018i.c
001922   530f     MOVF      0xf,0x1,0x1    	movf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\MCC18\src\traditional\startup\c018i.c
001924   e102     BNZ       0x192a         	bnz 2 // copy_one_byte                                                          C:\MCC18\src\traditional\startup\c018i.c
001926   5310     MOVF      0x10,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
001928   e007     BZ        0x1938         	bz 7 // done_copying                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\MCC18\src\traditional\startup\c018i.c
00192a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00192c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00192e   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\MCC18\src\traditional\startup\c018i.c
001930   070f     DECF      0xf,0x1,0x1    	decf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
001932   e2f8     BC        0x1924         	bc -8 // copy_loop                                                              C:\MCC18\src\traditional\startup\c018i.c
001934   0710     DECF      0x10,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\MCC18\src\traditional\startup\c018i.c
001936   d7f9     BRA       0x192a         	bra -7 // copy_one_byte                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\MCC18\src\traditional\startup\c018i.c
001938   c113     MOVFF     0x113,0xff6          TBLPTR = data_ptr;                                                         C:\MCC18\src\traditional\startup\c018i.c
00193a   fff6                                                                                                               
00193c   c114     MOVFF     0x114,0xff7                                                                                     
00193e   fff7                                                                                                               
001940   c115     MOVFF     0x115,0xff8                                                                                     
001942   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\MCC18\src\traditional\startup\c018i.c
001944   0101     MOVLB     0x1                  curr_entry--;                                                              C:\MCC18\src\traditional\startup\c018i.c
001946   0711     DECF      0x11,0x1,0x1                                                                                    
001948   0e00     MOVLW     0x0                                                                                             
00194a   5b12     SUBWFB    0x12,0x1,0x1                                                                                    
00194c   d7bf     BRA       0x18cc               goto test;                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\MCC18\src\traditional\startup\c018i.c
00194e   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                Microchip USB C18 Firmware Version 1.2                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\main.c
                                            * FileName:        main.c                                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Compiler:        C18 3.11+                                                    C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\main.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\main.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\main.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\main.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\main.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\main.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\main.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\main.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\main.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\main.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\main.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\main.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Rawin Rojvanit       05/14/07    A few updates.                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                           #include "system\typedefs.h"                        // Required                  C:\MCHPFSUSB\fw\Cdc\main.c
                                           #include "system\usb\usb.h"                         // Required                  C:\MCHPFSUSB\fw\Cdc\main.c
                                           #include "io_cfg.h"                                 // Required                  C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\MCHPFSUSB\fw\Cdc\main.c
                                           #include "user\user.h"                              // Modifiable                C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /** C O N F I G U R A T I O N ************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           #if   defined(__18F4550)||defined(__18F4455)|| \                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                                 defined(__18F2550)||defined(__18F2455)|| \                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                                 defined(__18F4553)||defined(__18F4458)|| \                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                                 defined(__18F2553)||defined(__18F2458)                                     C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #if defined(PIC18F4550_PICDEM_FS_USB)                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config PLLDIV   = 5         // (20 MHz input)                    C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CPUDIV   = OSC1_PLL2                                      C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config USBDIV   = 2         // Clock source from 96MHz PLL/2     C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config FOSC     = HSPLL_HS                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config FCMEN    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config IESO     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config PWRT     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config BOR      = ON                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config BORV     = 3                                              C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config VREGEN   = ON                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WDT      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WDTPS    = 32768                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config MCLRE    = ON                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config LPT1OSC  = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config PBADEN   = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CCP2MX   = ON                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config STVREN   = ON                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config LVP      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config ICPRT    = OFF       // Dedicated In-Circuit Debug/Programming C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config XINST    = OFF       // Extended Instruction Set          C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CP0      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CP1      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CP2      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CP3      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CPB      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CPD      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WRT0     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WRT1     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WRT2     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WRT3     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WRTB     = ON       // Boot Blok Write Protection         C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WRTC     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WRTD     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config EBTR0    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config EBTR1    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config EBTR2    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config EBTR3    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config EBTRB    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #else                                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #error Not a supported board, define configuration bits in __FILE__, line __LINE__ C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           #elif defined(__18F4450)||defined(__18F2450)                                     C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config PLLDIV   = 5         // (20 MHz input)                        C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config CPUDIV   = OSC1_PLL2                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config USBDIV   = 2         // Clock source from 96MHz PLL/2         C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config FOSC     = HSPLL_HS                                           C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config FCMEN    = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config IESO     = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config PWRT     = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config BOR      = ON                                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config BORV     = 28                                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config VREGEN   = ON                                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config WDT      = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config WDTPS    = 32768                                              C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config MCLRE    = ON                                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config LPT1OSC  = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config PBADEN   = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config STVREN   = ON                                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config LVP      = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config BBSIZ    = BB1K                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config ICPRT    = OFF       // Dedicated In-Circuit Debug/Programming C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config XINST    = OFF       // Extended Instruction Set              C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config CP0      = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config CP1      = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config CPB      = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config WRT0     = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config WRT1     = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config WRTB     = ON       // Boot Blok Write Protection             C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config WRTC     = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config EBTR0    = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config EBTR1    = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #pragma config EBTRB    = OFF                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           #elif defined(__18F87J50)||defined(__18F86J55)|| \                               C:\MCHPFSUSB\fw\Cdc\main.c
                                                 defined(__18F86J50)||defined(__18F85J50)|| \                               C:\MCHPFSUSB\fw\Cdc\main.c
                                                 defined(__18F67J50)||defined(__18F66J55)|| \                               C:\MCHPFSUSB\fw\Cdc\main.c
                                                 defined(__18F66J50)||defined(__18F65J50)                                   C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #if defined(PIC18F87J50_FS_USB_PIM)                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config XINST    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config STVREN   = ON                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config PLLDIV   = 3       // (12 MHz input)                      C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WDTEN    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CP0      = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CPUDIV   = OSC1                                           C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config IESO     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config FCMEN    = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config FOSC     = HSPLL                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WDTPS    = 32768                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config WAIT     = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config BW       = 16                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config MODE     = MM                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config EASHFT   = OFF                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config MSSPMSK  = MSK5                                           C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config PMPMX    = DEFAULT                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config ECCPMX   = DEFAULT                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #pragma config CCP2MX   = DEFAULT                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #else                                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #error Not a supported board, define configuration bits in __FILE__, line __LINE__ C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           #else                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #error Not a supported PIC18 USB microcontroller, see __FILE__, line __LINE__ C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           static void InitializeSystem(void);                                              C:\MCHPFSUSB\fw\Cdc\main.c
                                           void USBTasks(void);                                                             C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           extern void _startup (void);        // See c018i.c in your C18 compiler dir      C:\MCHPFSUSB\fw\Cdc\main.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = 0x000800                                  C:\MCHPFSUSB\fw\Cdc\main.c
                                           void _reset (void)                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\main.c
000800   ef46     GOTO      0x1a8c             _asm goto _startup _endasm                                                   C:\MCHPFSUSB\fw\Cdc\main.c
000802   f00d                                                                                                               
000804   0012     RETURN    0x0            }                                                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\main.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Function:        void main(void)                                              C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Overview:        Main program entry point.                                    C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           void main(void)                                                                  C:\MCHPFSUSB\fw\Cdc\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\main.c
001a04   d805     RCALL     0x1a10             InitializeSystem();                                                          C:\MCHPFSUSB\fw\Cdc\main.c
001a0c   d7fc     BRA       0x1a06             while(1)                                                                     C:\MCHPFSUSB\fw\Cdc\main.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
001a06   d812     RCALL     0x1a2c                 USBTasks();         // USB Tasks                                         C:\MCHPFSUSB\fw\Cdc\main.c
001a08   ec70     CALL      0x12e0,0x0             ProcessIO();        // See user\user.c & .h                              C:\MCHPFSUSB\fw\Cdc\main.c
001a0a   f009                                                                                                               
                                               }//end while                                                                 C:\MCHPFSUSB\fw\Cdc\main.c
001a0e   0012     RETURN    0x0            }//end main                                                                      C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Function:        static void InitializeSystem(void)                           C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Overview:        InitializeSystem is a centralize initialization routine.     C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                  All required USB initialization routines are called from     C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                  here.                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                  User application initialization routine should also be       C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                  called from here.                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           static void InitializeSystem(void)                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               #if defined(PIC18F87J50_FS_USB_PIM)                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               //Switches over automatically to PLL output                                  C:\MCHPFSUSB\fw\Cdc\main.c
                                               unsigned int pll_startup_counter = 600;                                      C:\MCHPFSUSB\fw\Cdc\main.c
                                               OSCTUNEbits.PLLEN = 1;  //Enable the PLL and wait 2+ms until the PLL locks before enabling USB module C:\MCHPFSUSB\fw\Cdc\main.c
                                               while(pll_startup_counter--);                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               WDTCONbits.ADSHR = 1;                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                               ANCON0 = 0xFF;                  // Default all pins to digital               C:\MCHPFSUSB\fw\Cdc\main.c
                                               ANCON1 = 0xFF;                  // Default all pins to digital               C:\MCHPFSUSB\fw\Cdc\main.c
                                               WDTCONbits.ADSHR = 0;                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #elif defined(PIC18F4550_PICDEM_FS_USB)                                      C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
001a10   0e0f     MOVLW     0xf                ADCON1 |= 0x0F;                 // Default all pins to digital               C:\MCHPFSUSB\fw\Cdc\main.c
001a12   12c1     IORWF     0xc1,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #else                                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                   #error No board defined, see usbcfg.h                                    C:\MCHPFSUSB\fw\Cdc\main.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #if defined(USE_USB_BUS_SENSE_IO)                                            C:\MCHPFSUSB\fw\Cdc\main.c
001a14   8292     BSF       0x92,0x1,0x0       tris_usb_bus_sense = INPUT_PIN; // See io_cfg.h                              C:\MCHPFSUSB\fw\Cdc\main.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #if defined(USE_SELF_POWER_SENSE_IO)                                         C:\MCHPFSUSB\fw\Cdc\main.c
001a16   8492     BSF       0x92,0x2,0x0       tris_self_power = INPUT_PIN;                                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
001a18   0e14     MOVLW     0x14               mInitializeUSBDriver();         // See usbdrv.h                              C:\MCHPFSUSB\fw\Cdc\main.c
001a1a   6e6f     MOVWF     0x6f,0x0                                                                                        
001a1c   0100     MOVLB     0x0                                                                                             
001a1e   6bfc     CLRF      0xfc,0x1                                                                                        
001a20   0100     MOVLB     0x0                                                                                             
001a22   6bfd     CLRF      0xfd,0x1                                                                                        
001a24   0100     MOVLB     0x0                                                                                             
001a26   6bfe     CLRF      0xfe,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
001a28   ef32     GOTO      0x1264             UserInit();                     // See user.c & .h                           C:\MCHPFSUSB\fw\Cdc\main.c
001a2a   f009                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           }//end InitializeSystem                                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Function:        void USBTasks(void)                                          C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * PreCondition:    InitializeSystem has been called.                            C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Overview:        Service loop for USB tasks.                                  C:\MCHPFSUSB\fw\Cdc\main.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\main.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\main.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           void USBTasks(void)                                                              C:\MCHPFSUSB\fw\Cdc\main.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\main.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\main.c
                                                * Servicing Hardware                                                        C:\MCHPFSUSB\fw\Cdc\main.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\main.c
001a2c   ec46     CALL      0x148c,0x0         USBCheckBusStatus();                    // Must use polling method           C:\MCHPFSUSB\fw\Cdc\main.c
001a2e   f00a                                                                                                               
001a30   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1)                                                        C:\MCHPFSUSB\fw\Cdc\main.c
001a32   d002     BRA       0x1a38                                                                                          
001a34   ec67     CALL      0x14ce,0x0             USBDriverService();                 // Interrupt or polling method       C:\MCHPFSUSB\fw\Cdc\main.c
001a36   f00a                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                               #if defined(USB_USE_CDC)                                                     C:\MCHPFSUSB\fw\Cdc\main.c
001a38   ef34     GOTO      0xe68              CDCTxService();                                                              C:\MCHPFSUSB\fw\Cdc\main.c
001a3a   f007                                                                                                               
                                               #endif                                                                       C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           }// end USBTasks                                                                 C:\MCHPFSUSB\fw\Cdc\main.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\main.c
                                           /** EOF main.c ***************************************************************/  C:\MCHPFSUSB\fw\Cdc\main.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * USB Memory Map                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * and reduces program size.                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * BDT is                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * functions.                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * USB interface function:                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Conclusion:                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * be shown as:                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * smaller program code.                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                           // setting for each interface ID                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            * Section C: CDC Buffer                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #pragma udata usbram5a=0x500    //See Linker Script,usb5:0x500-...               C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #if defined(USB_USE_CDC)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_notice[CDC_INT_EP_SIZE];                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_rx[CDC_BULK_OUT_EP_SIZE];                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           volatile far unsigned char cdc_data_tx[CDC_BULK_IN_EP_SIZE];                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbmmap.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB C18 Firmware Version 1.2                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 3.11+                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       05/14/07    Bug fixes.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           byte bTRNIFCount;               // Bug fix - Work around.                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00148c   a280     BTFSS     0x80,0x1,0x0       if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00148e   d003     BRA       0x1496                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001490   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001492   d80f     RCALL     0x14b2                     USBModuleEnable();                  // Is off, enable it             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001494   d002     BRA       0x149a             else                                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001496   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001498   d813     RCALL     0x14c0                     USBModuleDisable();                 // Is on, disable it             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00149a   0100     MOVLB     0x0                if(usb_device_state == ATTACHED_STATE)                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00149c   05fc     DECF      0xfc,0x0,0x1                                                                                    
00149e   e108     BNZ       0x14b0                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014a0   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014a2   d006     BRA       0x14b0                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014a4   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014a6   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014a8   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014aa   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014ac   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014ae   6ffc     MOVWF     0xfc,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014b0   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014b2   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014b4   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014b6   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014b8   0100     MOVLB     0x0                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014ba   0e01     MOVLW     0x1                                                                                             
0014bc   6ffc     MOVWF     0xfc,0x1                                                                                        
0014be   0012     RETURN    0x0            }//end USBModuleEnable                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014c0   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014c2   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014c4   0100     MOVLB     0x0                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014c6   6bfc     CLRF      0xfc,0x1                                                                                        
0014c8   0012     RETURN    0x0            }//end USBModuleDisable                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014ca   ef60     GOTO      0x14c0             USBModuleDisable();                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014cc   f00a                                                                                                               
                                           }//end USBSoftDetach                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014ce   0100     MOVLB     0x0                if(usb_device_state == DETACHED_STATE) return;                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014d0   51fc     MOVF      0xfc,0x0,0x1                                                                                    
0014d2   e101     BNZ       0x14d6                                                                                          
0014d4   d045     BRA       0x1560                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014d6   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014d8   0b04     ANDLW     0x4                                                                                             
0014da   e004     BZ        0x14e4                                                                                          
0014dc   5069     MOVF      0x69,0x0,0x0                                                                                    
0014de   0b04     ANDLW     0x4                                                                                             
0014e0   e001     BZ        0x14e4                                                                                          
0014e2   d847     RCALL     0x1572                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014e4   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014e6   d03c     BRA       0x1560                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014e8   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014ea   0b01     ANDLW     0x1                                                                                             
0014ec   e004     BZ        0x14f6                                                                                          
0014ee   5069     MOVF      0x69,0x0,0x0                                                                                    
0014f0   0b01     ANDLW     0x1                                                                                             
0014f2   e001     BZ        0x14f6                                                                                          
0014f4   d86b     RCALL     0x15cc                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014f6   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0014f8   0b10     ANDLW     0x10                                                                                            
0014fa   e004     BZ        0x1504                                                                                          
0014fc   5069     MOVF      0x69,0x0,0x0                                                                                    
0014fe   0b10     ANDLW     0x10                                                                                            
001500   e001     BZ        0x1504                                                                                          
001502   d82f     RCALL     0x1562                                                                                          
001504   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001506   0b40     ANDLW     0x40                                                                                            
001508   e004     BZ        0x1512                                                                                          
00150a   5069     MOVF      0x69,0x0,0x0                                                                                    
00150c   0b40     ANDLW     0x40                                                                                            
00150e   e001     BZ        0x1512                                                                                          
001510   d849     RCALL     0x15a4                                                                                          
001512   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001514   0b20     ANDLW     0x20                                                                                            
001516   e004     BZ        0x1520                                                                                          
001518   5069     MOVF      0x69,0x0,0x0                                                                                    
00151a   0b20     ANDLW     0x20                                                                                            
00151c   e001     BZ        0x1520                                                                                          
00151e   d844     RCALL     0x15a8                                                                                          
001520   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001522   0b02     ANDLW     0x2                                                                                             
001524   e004     BZ        0x152e                                                                                          
001526   5069     MOVF      0x69,0x0,0x0                                                                                    
001528   0b02     ANDLW     0x2                                                                                             
00152a   e001     BZ        0x152e                                                                                          
00152c   d84d     RCALL     0x15c8                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00152e   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001530   0100     MOVLB     0x0                                                                                             
001532   5dfc     SUBWF     0xfc,0x0,0x1                                                                                    
001534   e201     BC        0x1538                                                                                          
001536   d014     BRA       0x1560                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Bug Fix: May 14, 2007                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001538   0101     MOVLB     0x1                for(bTRNIFCount = 0; bTRNIFCount < 4; bTRNIFCount++)                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00153a   6b1f     CLRF      0x1f,0x1                                                                                        
00153c   0e04     MOVLW     0x4                                                                                             
00153e   5d1f     SUBWF     0x1f,0x0,0x1                                                                                    
001540   e20f     BC        0x1560                                                                                          
001558   0101     MOVLB     0x1                                                                                             
00155a   2b1f     INCF      0x1f,0x1,0x1                                                                                    
00155c   d7ef     BRA       0x153c                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001542   5068     MOVF      0x68,0x0,0x0           if(UIRbits.TRNIF && UIEbits.TRNIE)                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001544   0b08     ANDLW     0x8                                                                                             
001546   e00b     BZ        0x155e                                                                                          
001548   5069     MOVF      0x69,0x0,0x0                                                                                    
00154a   0b08     ANDLW     0x8                                                                                             
00154c   e008     BZ        0x155e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                       /*                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                        * USBCtrlEPService only services transactions over EP0.             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                        * It ignores all other EP transactions.                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00154e   ec1c     CALL      0x838,0x0                  if(USBCtrlEPService() == 0) // If not an EP0 transaction, then clear TRNIF. C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001550   f004                                                                                                               
001552   0900     IORLW     0x0                                                                                             
001554   e101     BNZ       0x1558                                                                                          
                                                       {                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                           /*                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * Other EP can be serviced later by responsible device class firmware. C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * Each device driver knows when an OUT or IN transaction is ready by  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * checking the buffer ownership bit.                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * An OUT EP should always be owned by SIE until the data is ready.    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * An IN EP should always be owned by CPU until the data is ready.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         *                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * Because of this logic, it is not necessary to save the USTAT value  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * of non-EP0 transactions.                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         */                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001556   9668     BCF       0x68,0x3,0x0   		        UIRbits.TRNIF = 0;                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		        /*                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * At least six Tcy are needed in between clearing UIR<TRNIF>          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * and when it becomes reasserted when the USTAT FIFO has more         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * than one entry in it.                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         *                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * No Nops are needed here because the number of instruction           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * cycles between clearing the TRNIF here to the next flag             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * check is longer than the required minimum of six Tcy due            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * to the for loop logic of bTRNIFCount. This is true even             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         * when all optimization options in C18 are enabled.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           		         */                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                       }                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   else                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00155e   d000     BRA       0x1560                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }// end for(bTRNIFCount = 0; bTRNIFCount < 4; bTRNIFCount++)                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001560   0012     RETURN    0x0            }//end USBDriverService                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001562   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001564   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001566   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001568   9aa1     BCF       0xa1,0x5,0x0       PIR2bits.USBIF = 0;                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00156a   8aa0     BSF       0xa0,0x5,0x0       PIE2bits.USBIE = 1;                     // Set USB wakeup source             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00156c   0003     SLEEP                        Sleep();                                // Goto sleep                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00156e   9aa0     BCF       0xa0,0x5,0x0       PIE2bits.USBIE = 0;                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001570   0012     RETURN    0x0            }//end USBSuspend                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001572   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001574   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Bug Fix: May 14, 2007                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           The ACTVIF bit cannot be cleared immediately after the USB module wakes          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           up from Suspend or while the USB module is suspended. A few clock cycles         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           are required to synchronize the internal hardware state machine before           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           the ACTIVIF bit can be cleared by firmware. Clearing the ACTVIF bit              C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           before the internal hardware is synchronized may not have an effect on           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           the value of ACTVIF. Additonally, if the USB module uses the clock from          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           the 96 MHz PLL source, then after clearing the SUSPND bit, the USB               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           module may not be immediately operational while waiting for the 96 MHz           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           PLL to lock.                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               // UIRbits.ACTVIF = 0;                      // Removed                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001576   a468     BTFSS     0x68,0x2,0x0       while(UIRbits.ACTVIF){UIRbits.ACTVIF = 0;}  // Added                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001578   d002     BRA       0x157e                                                                                          
00157a   9468     BCF       0x68,0x2,0x0                                                                                    
00157c   d7fc     BRA       0x1576                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00157e   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001580   0100     MOVLB     0x0                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001582   a1fd     BTFSS     0xfd,0x0,0x1                                                                                    
001584   d00e     BRA       0x15a2                                                                                          
                                               {                                       // has been enabled by the host.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Bug Fix: May 14, 2007                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ACTVIF should be clear after exiting USBRemoteWakeup().                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           This was supposed to be done when calling USBWakeFromSuspend() from              C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           USBRemoteWakeup(). However, this was not the case because when the               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           RESUME signal is sent, it causes the ACTVIF bit to set again.                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           By clearing the SUSPND bit only, it leaves the ACTVIE as one, and                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           when the RESUME signal is sent, it causes the ACTVIF to set.                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Now both ACTVIE and ACTVIF are set, allowing the firmware to                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           properly see the event and call USBWakeFromSuspend() on the next                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           polling cycle of USBDriverService().                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   /* Unsuspend USB module */                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   //USBWakeFromSuspend();             // Removed                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001586   926d     BCF       0x6d,0x1,0x0           UCONbits.SUSPND = 0;                // Added                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001588   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00158a   0101     MOVLB     0x1                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00158c   0e08     MOVLW     0x8                                                                                             
00158e   6f20     MOVWF     0x20,0x1                                                                                        
001590   0e07     MOVLW     0x7                                                                                             
001592   6f21     MOVWF     0x21,0x1                                                                                        
                                                   do                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001594   0720     DECF      0x20,0x1,0x1               delay_count--;                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001596   0e00     MOVLW     0x0                                                                                             
001598   5b21     SUBWFB    0x21,0x1,0x1                                                                                    
00159a   5120     MOVF      0x20,0x0,0x1           }while(delay_count);                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00159c   1121     IORWF     0x21,0x0,0x1                                                                                    
00159e   e1fa     BNZ       0x1594                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015a0   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015a2   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015a4   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015a6   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015a8   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015aa   d00c     BRA       0x15c4                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Bug Fix: May 14, 2007 (#F4)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           In a control transfer, when a request is not supported, all                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           subsequent transactions should be stalled until a new SETUP                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           transaction is received. The original firmware only stalls the                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           first subsequent transaction, then ACKs others. Typically, a                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           compliance USB host will stop sending subsequent transactions                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           once the first stall is received. In the original firmware,                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           function USBStallHandler() in usbdrv.c calls                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           USBPrepareForNextSetupTrf() when a STALL event occurred on EP0.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           In turn, USBPrepareForNextSetupTrf() reconfigures EP0 IN and OUT                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           to prepare for the next SETUP transaction. The work around is not                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           to call USBPrepareForNextSetupTrf() in USBStallHandler().                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   //USBPrepareForNextSetupTrf();      // Removed                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Bug Fix: May 14, 2007 (#F7 - Partial 4/4)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           For a control transfer read, if the host tries to read more data                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           than what it has requested, the peripheral device should stall the               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           extra IN transactions and the status stage. Typically, a host does               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           not try to read more data than what it has requested. The original               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           firmware did not handle this situation. Instead of stalling extra                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           IN transactions, the device kept sending out zero length packets.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           This work around checks to make sure that at least one extra IN                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           transaction is stalled before setting the OUT endpoint to stall the              C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           status stage.                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ac   0e80     MOVLW     0x80                   if((ep0Bo.Stat._byte == _USIE) && (ep0Bi.Stat._byte == (_USIE|_BSTALL))) C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ae   0104     MOVLB     0x4                                                                                             
0015b0   5d00     SUBWF     0x0,0x0,0x1                                                                                     
0015b2   e107     BNZ       0x15c2                                                                                          
0015b4   0e84     MOVLW     0x84                                                                                            
0015b6   0104     MOVLB     0x4                                                                                             
0015b8   5d04     SUBWF     0x4,0x0,0x1                                                                                     
0015ba   e103     BNZ       0x15c2                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                       // Set ep0Bo to stall also                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015bc   0104     MOVLB     0x4                        ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN|_BSTALL;                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015be   0e8c     MOVLW     0x8c                                                                                            
0015c0   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015c2   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;         	    // Clear STALL status                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015c4   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015c6   0012     RETURN    0x0            }//end USBStallHandler                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Bug Fix: May 14, 2007                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           UERRIF bit is a read-only bit and cannot be cleared directly.                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           The correct way is to clear UEIR register.                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                               //UIRbits.UERRIF = 0;           // Removed                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015c8   6a6a     CLRF      0x6a,0x0            UEIR = 0;                      // Added                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ca   0012     RETURN    0x0            }//end USBErrorHandler                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015cc   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015ce   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015d0   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015d2   6e6b     MOVWF     0x6b,0x0                                                                                        
0015d4   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015d6   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015d8   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015da   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015dc   6ee6     MOVWF     0xe6,0x0                                                                                        
0015de   0e71     MOVLW     0x71                                                                                            
0015e0   6ee6     MOVWF     0xe6,0x0                                                                                        
0015e2   0e0f     MOVLW     0xf                                                                                             
0015e4   6ee6     MOVWF     0xe6,0x0                                                                                        
0015e6   d81a     RCALL     0x161c                                                                                          
0015e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015ea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015ee   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f0   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f2   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f4   d008     BRA       0x1606                                                                                          
001604   d7f6     BRA       0x15f2                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f6   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Bug Fix: May 14, 2007                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Clearing the transfer complete flag bit, TRNIF, causes the SIE to                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           advance the FIFO. If the next data in the FIFO holding register is               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           valid, the SIE will reassert the interrupt within 6Tcy of clearing               C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           TRNIF. If no additional data is preset, TRNIF will remain clear.                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           Additional nops were added in this fix to guarantee that TRNIF is                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           properly updated before being checked again.                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015f8   0000     NOP                              Nop(); Nop(); Nop();                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
0015fa   0000     NOP                                                                                                       
0015fc   0000     NOP                                                                                                       
0015fe   0000     NOP                              Nop(); Nop(); Nop();                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001600   0000     NOP                                                                                                       
001602   0000     NOP                                                                                                       
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001606   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001608   ec9e     CALL      0xb3c,0x0          USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00160a   f005                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00160c   0100     MOVLB     0x0                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00160e   91fd     BCF       0xfd,0x0,0x1                                                                                    
001610   0100     MOVLB     0x0                usb_active_cfg = 0;             // Clear active configuration                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001612   6bfe     CLRF      0xfe,0x1                                                                                        
001614   0100     MOVLB     0x0                usb_device_state = DEFAULT_STATE;                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001616   0e03     MOVLW     0x3                                                                                             
001618   6ffc     MOVWF     0xfc,0x1                                                                                        
00161a   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00161c   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00161e   ffe6                                                                                                               
001620   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001622   ffd9                                                                                                               
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001624   0efd     MOVLW     0xfd               *startAdr;                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001626   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001628   ffe9                                                                                                               
00162a   0efe     MOVLW     0xfe                                                                                            
00162c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00162e   ffea                                                                                                               
001630   0efc     MOVLW     0xfc               while(count)                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001632   50db     MOVF      0xdb,0x0,0x0                                                                                    
001634   e004     BZ        0x163e                                                                                          
00163c   d7f9     BRA       0x1630                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   _asm                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001636   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                                   _endasm                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001638   0efc     MOVLW     0xfc                   count--;                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00163a   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
00163e   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
001640   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001642   ffd9                                                                                                               
001644   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000f58   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000f5a   5120     MOVF      0x20,0x0,0x1                                                                                    
000f5c   0b60     ANDLW     0x60                                                                                            
000f5e   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000f60   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000f62   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000f64   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000f66   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000f68   0900     IORLW     0x0                                                                                             
000f6a   e001     BZ        0xf6e                                                                                           
000f6c   d055     BRA       0x1018                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000f6e   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000f70   0a07     XORLW     0x7                                                                                             
000f72   e051     BZ        0x1016                                                                                          
000f74   0a0b     XORLW     0xb                                                                                             
000f76   e04f     BZ        0x1016                                                                                          
000f78   0a07     XORLW     0x7                                                                                             
000f7a   e040     BZ        0xffc                                                                                           
000f7c   0a01     XORLW     0x1                                                                                             
000f7e   e02c     BZ        0xfd8                                                                                           
000f80   0a0b     XORLW     0xb                                                                                             
000f82   e028     BZ        0xfd4                                                                                           
000f84   0a02     XORLW     0x2                                                                                             
000f86   e026     BZ        0xfd4                                                                                           
000f88   0a03     XORLW     0x3                                                                                             
000f8a   e022     BZ        0xfd0                                                                                           
000f8c   0a08     XORLW     0x8                                                                                             
000f8e   e012     BZ        0xfb4                                                                                           
000f90   0a01     XORLW     0x1                                                                                             
000f92   e00e     BZ        0xfb0                                                                                           
000f94   0a0f     XORLW     0xf                                                                                             
000f96   e00a     BZ        0xfac                                                                                           
000f98   0a03     XORLW     0x3                                                                                             
000f9a   e001     BZ        0xf9e                                                                                           
000f9c   d03c     BRA       0x1016                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000f9e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fa0   0e01     MOVLW     0x1                                                                                             
000fa2   6f17     MOVWF     0x17,0x1                                                                                        
000fa4   0100     MOVLB     0x0                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fa6   0e04     MOVLW     0x4                                                                                             
000fa8   6ffc     MOVWF     0xfc,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000faa   d036     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fac   d836     RCALL     0x101a                     USBStdGetDscHandler();                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fae   d034     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fb0   d890     RCALL     0x10d2                     USBStdSetCfgHandler();                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fb2   d032     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fb4   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fb6   0e01     MOVLW     0x1                                                                                             
000fb8   6f17     MOVWF     0x17,0x1                                                                                        
000fba   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fbc   0efe     MOVLW     0xfe                                                                                            
000fbe   6f18     MOVWF     0x18,0x1                                                                                        
000fc0   0e00     MOVLW     0x0                                                                                             
000fc2   6f19     MOVWF     0x19,0x1                                                                                        
000fc4   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fc6   93fd     BCF       0xfd,0x1,0x1                                                                                    
000fc8   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fca   0e01     MOVLW     0x1                                                                                             
000fcc   6f1c     MOVWF     0x1c,0x1                                                                                        
000fce   d024     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fd0   d8a8     RCALL     0x1122                     USBStdGetStatusHandler();                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fd2   d022     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fd4   d8f6     RCALL     0x11c2                     USBStdFeatureReqHandler();                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fd6   d020     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fd8   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fda   0e01     MOVLW     0x1                                                                                             
000fdc   6f17     MOVWF     0x17,0x1                                                                                        
000fde   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000fe0   5124     MOVF      0x24,0x0,0x1                                                                                    
000fe2   0101     MOVLB     0x1                                                                                             
000fe4   6f18     MOVWF     0x18,0x1                                                                                        
000fe6   6b19     CLRF      0x19,0x1                                                                                        
000fe8   0eff     MOVLW     0xff                                                                                            
000fea   2718     ADDWF     0x18,0x1,0x1                                                                                    
000fec   0e00     MOVLW     0x0                                                                                             
000fee   2319     ADDWFC    0x19,0x1,0x1                                                                                    
000ff0   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000ff2   93fd     BCF       0xfd,0x1,0x1                                                                                    
000ff4   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000ff6   0e01     MOVLW     0x1                                                                                             
000ff8   6f1c     MOVWF     0x1c,0x1                                                                                        
000ffa   d00e     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000ffc   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
000ffe   0e01     MOVLW     0x1                                                                                             
001000   6f17     MOVWF     0x17,0x1                                                                                        
001002   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001004   5124     MOVF      0x24,0x0,0x1                                                                                    
001006   6aea     CLRF      0xea,0x0                                                                                        
001008   0fff     ADDLW     0xff                                                                                            
00100a   6ee9     MOVWF     0xe9,0x0                                                                                        
00100c   0e00     MOVLW     0x0                                                                                             
00100e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001010   c422     MOVFF     0x422,0xfef                                                                                     
001012   ffef                                                                                                               
001014   d001     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   default:                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001016   d000     BRA       0x1018                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001018   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00101a   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00101c   0104     MOVLB     0x4                                                                                             
00101e   5d20     SUBWF     0x20,0x0,0x1                                                                                    
001020   e157     BNZ       0x10d0                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001022   5123     MOVF      0x23,0x0,0x1           switch(SetupPkt.bDscType)                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001024   0a03     XORLW     0x3                                                                                             
001026   e034     BZ        0x1090                                                                                          
001028   0a01     XORLW     0x1                                                                                             
00102a   e010     BZ        0x104c                                                                                          
00102c   0a03     XORLW     0x3                                                                                             
00102e   e001     BZ        0x1032                                                                                          
001030   d04d     BRA       0x10cc                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001032   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001034   0e01     MOVLW     0x1                                                                                             
001036   6f17     MOVWF     0x17,0x1                                                                                        
001038   0101     MOVLB     0x1                            pSrc.bRom = (rom byte*)&device_dsc;                              C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00103a   0ee4     MOVLW     0xe4                                                                                            
00103c   6f18     MOVWF     0x18,0x1                                                                                        
00103e   0e17     MOVLW     0x17                                                                                            
001040   6f19     MOVWF     0x19,0x1                                                                                        
001042   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001044   0101     MOVLB     0x1                                                                                             
001046   6f1c     MOVWF     0x1c,0x1                                                                                        
001048   6b1d     CLRF      0x1d,0x1                                                                                        
00104a   d040     BRA       0x10cc                         break;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00104c   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00104e   0e01     MOVLW     0x1                                                                                             
001050   6f17     MOVWF     0x17,0x1                                                                                        
001052   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001054   5122     MOVF      0x22,0x0,0x1                                                                                    
001056   6ef6     MOVWF     0xf6,0x0                                                                                        
001058   6af7     CLRF      0xf7,0x0                                                                                        
00105a   90d8     BCF       0xd8,0x0,0x0                                                                                    
00105c   36f6     RLCF      0xf6,0x1,0x0                                                                                    
00105e   36f7     RLCF      0xf7,0x1,0x0                                                                                    
001060   0ea5     MOVLW     0xa5                                                                                            
001062   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
001064   0e18     MOVLW     0x18                                                                                            
001066   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001068   0009     TBLRDPOSTINC                                                                                              
00106a   cff5     MOVFF     0xff5,0x118                                                                                     
00106c   f118                                                                                                               
00106e   000a     TBLRDPOSTDEC                                                                                              
001070   cff5     MOVFF     0xff5,0x119                                                                                     
001072   f119                                                                                                               
001074   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001076   0101     MOVLB     0x1                                                                                             
001078   6af7     CLRF      0xf7,0x0                                                                                        
00107a   2518     ADDWF     0x18,0x0,0x1                                                                                    
00107c   6ef6     MOVWF     0xf6,0x0                                                                                        
00107e   5119     MOVF      0x19,0x0,0x1                                                                                    
001080   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001082   0009     TBLRDPOSTINC                                                                                              
001084   cff5     MOVFF     0xff5,0x11c                                                                                     
001086   f11c                                                                                                               
001088   000a     TBLRDPOSTDEC                                                                                              
00108a   cff5     MOVFF     0xff5,0x11d                                                                                     
00108c   f11d                                                                                                               
00108e   d01e     BRA       0x10cc                         break;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001090   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001092   0e01     MOVLW     0x1                                                                                             
001094   6f17     MOVWF     0x17,0x1                                                                                        
001096   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001098   5122     MOVF      0x22,0x0,0x1                                                                                    
00109a   6ef6     MOVWF     0xf6,0x0                                                                                        
00109c   6af7     CLRF      0xf7,0x0                                                                                        
00109e   90d8     BCF       0xd8,0x0,0x0                                                                                    
0010a0   36f6     RLCF      0xf6,0x1,0x0                                                                                    
0010a2   36f7     RLCF      0xf7,0x1,0x0                                                                                    
0010a4   0ea9     MOVLW     0xa9                                                                                            
0010a6   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
0010a8   0e18     MOVLW     0x18                                                                                            
0010aa   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
0010ac   0009     TBLRDPOSTINC                                                                                              
0010ae   cff5     MOVFF     0xff5,0x118                                                                                     
0010b0   f118                                                                                                               
0010b2   000a     TBLRDPOSTDEC                                                                                              
0010b4   cff5     MOVFF     0xff5,0x119                                                                                     
0010b6   f119                                                                                                               
0010b8   c118     MOVFF     0x118,0xff6                    wCount._word = *pSrc.bRom;                  // Set data count    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010ba   fff6                                                                                                               
0010bc   c119     MOVFF     0x119,0xff7                                                                                     
0010be   fff7                                                                                                               
0010c0   0008     TBLRD                                                                                                     
0010c2   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0010c4   0101     MOVLB     0x1                                                                                             
0010c6   6f1c     MOVWF     0x1c,0x1                                                                                        
0010c8   6b1d     CLRF      0x1d,0x1                                                                                        
0010ca   d000     BRA       0x10cc                         break;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   }//end switch                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010cc   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010ce   83fd     BSF       0xfd,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010d0   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010d2   0101     MOVLB     0x1                ctrl_trf_session_owner = MUID_USB9;                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010d4   0e01     MOVLW     0x1                                                                                             
0010d6   6f17     MOVWF     0x17,0x1                                                                                        
0010d8   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010da   6ee6     MOVWF     0xe6,0x0                                                                                        
0010dc   0e71     MOVLW     0x71                                                                                            
0010de   6ee6     MOVWF     0xe6,0x0                                                                                        
0010e0   0e0f     MOVLW     0xf                                                                                             
0010e2   6ee6     MOVWF     0xe6,0x0                                                                                        
0010e4   ec0e     CALL      0x161c,0x0                                                                                      
0010e6   f00b                                                                                                               
0010e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010ea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010ee   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0010f0   6ee6     MOVWF     0xe6,0x0                                                                                        
0010f2   0eff     MOVLW     0xff                                                                                            
0010f4   6ee6     MOVWF     0xe6,0x0                                                                                        
0010f6   0e00     MOVLW     0x0                                                                                             
0010f8   6ee6     MOVWF     0xe6,0x0                                                                                        
0010fa   ec0e     CALL      0x161c,0x0                                                                                      
0010fc   f00b                                                                                                               
0010fe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001100   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001102   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001104   c422     MOVFF     0x422,0xfe         usb_active_cfg = SetupPkt.bCfgValue;                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001106   f0fe                                                                                                               
001108   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00110a   5122     MOVF      0x22,0x0,0x1                                                                                    
00110c   e104     BNZ       0x1116                                                                                          
00110e   0100     MOVLB     0x0                    usb_device_state = ADDRESS_STATE;                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001110   0e05     MOVLW     0x5                                                                                             
001112   6ffc     MOVWF     0xfc,0x1                                                                                        
001114   d005     BRA       0x1120             else                                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001116   0100     MOVLB     0x0                    usb_device_state = CONFIGURED_STATE;                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001118   0e06     MOVLW     0x6                                                                                             
00111a   6ffc     MOVWF     0xfc,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   #if defined(USB_USE_CDC)                // See autofiles\usbcfg.h        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00111c   ec51     CALL      0xca2,0x0              CDCInitEP();                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00111e   f006                                                                                                               
                                                   #endif                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001120   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001122   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001124   6b28     CLRF      0x28,0x1                                                                                        
001126   6b29     CLRF      0x29,0x1           CtrlTrfData._byte1 = 0;                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001128   0104     MOVLB     0x4                switch(SetupPkt.Recipient)                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00112a   5120     MOVF      0x20,0x0,0x1                                                                                    
00112c   0b1f     ANDLW     0x1f                                                                                            
00112e   0a02     XORLW     0x2                                                                                             
001130   e016     BZ        0x115e                                                                                          
001132   0a03     XORLW     0x3                                                                                             
001134   e010     BZ        0x1156                                                                                          
001136   0a01     XORLW     0x1                                                                                             
001138   e001     BZ        0x113c                                                                                          
00113a   d035     BRA       0x11a6                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00113c   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00113e   0e01     MOVLW     0x1                                                                                             
001140   6f17     MOVWF     0x17,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001142   a480     BTFSS     0x80,0x2,0x0               if(self_power == 1)                     // self_power defined in io_cfg.h C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001144   d002     BRA       0x114a                                                                                          
001146   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001148   8128     BSF       0x28,0x0,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00114a   0100     MOVLB     0x0                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00114c   a1fd     BTFSS     0xfd,0x0,0x1                                                                                    
00114e   d002     BRA       0x1154                                                                                          
001150   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001152   8328     BSF       0x28,0x1,0x1                                                                                    
001154   d028     BRA       0x11a6                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001156   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001158   0e01     MOVLW     0x1                                                                                             
00115a   6f17     MOVWF     0x17,0x1                                                                                        
00115c   d024     BRA       0x11a6                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00115e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001160   0e01     MOVLW     0x1                                                                                             
001162   6f17     MOVWF     0x17,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001164   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001166   5124     MOVF      0x24,0x0,0x1                                                                                    
001168   0b0f     ANDLW     0xf                                                                                             
00116a   0d08     MULLW     0x8                                                                                             
00116c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00116e   6a11     CLRF      0x11,0x0                                                                                        
001170   0f00     ADDLW     0x0                                                                                             
001172   6e10     MOVWF     0x10,0x0                                                                                        
001174   0e04     MOVLW     0x4                                                                                             
001176   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001178   5124     MOVF      0x24,0x0,0x1                                                                                    
00117a   0b80     ANDLW     0x80                                                                                            
00117c   e001     BZ        0x1180                                                                                          
00117e   0e01     MOVLW     0x1                                                                                             
001180   0d04     MULLW     0x4                                                                                             
001182   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001184   0101     MOVLB     0x1                                                                                             
001186   2410     ADDWF     0x10,0x0,0x0                                                                                    
001188   6f1a     MOVWF     0x1a,0x1                                                                                        
00118a   0e00     MOVLW     0x0                                                                                             
00118c   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00118e   6f1b     MOVWF     0x1b,0x1                                                                                        
001190   c11a     MOVFF     0x11a,0xfe9                if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001192   ffe9                                                                                                               
001194   c11b     MOVFF     0x11b,0xfea                                                                                     
001196   ffea                                                                                                               
001198   50ef     MOVF      0xef,0x0,0x0                                                                                    
00119a   0b04     ANDLW     0x4                                                                                             
00119c   e003     BZ        0x11a4                                                                                          
00119e   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011a0   0e01     MOVLW     0x1                                                                                             
0011a2   6f28     MOVWF     0x28,0x1                                                                                        
0011a4   d000     BRA       0x11a6                     break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011a6   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_USB9)                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011a8   0517     DECF      0x17,0x0,0x1                                                                                    
0011aa   e10a     BNZ       0x11c0                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011ac   0101     MOVLB     0x1                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011ae   0e28     MOVLW     0x28                                                                                            
0011b0   6f18     MOVWF     0x18,0x1                                                                                        
0011b2   0e04     MOVLW     0x4                                                                                             
0011b4   6f19     MOVWF     0x19,0x1                                                                                        
0011b6   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011b8   93fd     BCF       0xfd,0x1,0x1                                                                                    
0011ba   0101     MOVLB     0x1                    LSB(wCount) = 2;                            // Set data count            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011bc   0e02     MOVLW     0x2                                                                                             
0011be   6f1c     MOVWF     0x1c,0x1                                                                                        
                                               }//end if(...)                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011c0   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                  requests                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011c2   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011c4   0522     DECF      0x22,0x0,0x1                                                                                    
0011c6   e110     BNZ       0x11e8                (SetupPkt.Recipient == RCPT_DEV))                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011c8   5120     MOVF      0x20,0x0,0x1                                                                                    
0011ca   0b1f     ANDLW     0x1f                                                                                            
0011cc   0900     IORLW     0x0                                                                                             
0011ce   e10c     BNZ       0x11e8                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011d0   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011d2   0e01     MOVLW     0x1                                                                                             
0011d4   6f17     MOVWF     0x17,0x1                                                                                        
0011d6   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011d8   0104     MOVLB     0x4                                                                                             
0011da   5d21     SUBWF     0x21,0x0,0x1                                                                                    
0011dc   e103     BNZ       0x11e4                                                                                          
0011de   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 1;                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011e0   81fd     BSF       0xfd,0x0,0x1                                                                                    
0011e2   d002     BRA       0x11e8                 else                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011e4   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 0;                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011e6   91fd     BCF       0xfd,0x0,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011e8   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011ea   5122     MOVF      0x22,0x0,0x1                                                                                    
0011ec   e13a     BNZ       0x1262                (SetupPkt.Recipient == RCPT_EP)&&                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011ee   5120     MOVF      0x20,0x0,0x1                                                                                    
0011f0   0b1f     ANDLW     0x1f                                                                                            
0011f2   0802     SUBLW     0x2                                                                                             
0011f4   e136     BNZ       0x1262                                                                                          
0011f6   5124     MOVF      0x24,0x0,0x1          (SetupPkt.EPNum != 0))                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011f8   0b0f     ANDLW     0xf                                                                                             
0011fa   0900     IORLW     0x0                                                                                             
0011fc   e032     BZ        0x1262                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
0011fe   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001200   0e01     MOVLW     0x1                                                                                             
001202   6f17     MOVWF     0x17,0x1                                                                                        
                                                   /* Must do address calculation here */                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001204   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001206   5124     MOVF      0x24,0x0,0x1                                                                                    
001208   0b0f     ANDLW     0xf                                                                                             
00120a   0d08     MULLW     0x8                                                                                             
00120c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00120e   6a11     CLRF      0x11,0x0                                                                                        
001210   0f00     ADDLW     0x0                                                                                             
001212   6e10     MOVWF     0x10,0x0                                                                                        
001214   0e04     MOVLW     0x4                                                                                             
001216   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001218   5124     MOVF      0x24,0x0,0x1                                                                                    
00121a   0b80     ANDLW     0x80                                                                                            
00121c   e001     BZ        0x1220                                                                                          
00121e   0e01     MOVLW     0x1                                                                                             
001220   0d04     MULLW     0x4                                                                                             
001222   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001224   0101     MOVLB     0x1                                                                                             
001226   2410     ADDWF     0x10,0x0,0x0                                                                                    
001228   6f1a     MOVWF     0x1a,0x1                                                                                        
00122a   0e00     MOVLW     0x0                                                                                             
00122c   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00122e   6f1b     MOVWF     0x1b,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001230   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001232   0104     MOVLB     0x4                                                                                             
001234   5d21     SUBWF     0x21,0x0,0x1                                                                                    
001236   e107     BNZ       0x1246                                                                                          
001238   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00123a   c11a     MOVFF     0x11a,0xfe9                                                                                     
00123c   ffe9                                                                                                               
00123e   c11b     MOVFF     0x11b,0xfea                                                                                     
001240   ffea                                                                                                               
001242   6eef     MOVWF     0xef,0x0                                                                                        
001244   d00e     BRA       0x1262                 else                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001246   af24     BTFSS     0x24,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001248   d006     BRA       0x1256                                                                                          
00124a   c11a     MOVFF     0x11a,0xfe9                    *pDst.bRam = _UCPU;                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
00124c   ffe9                                                                                                               
00124e   c11b     MOVFF     0x11b,0xfea                                                                                     
001250   ffea                                                                                                               
001252   6aef     CLRF      0xef,0x0                                                                                        
001254   d006     BRA       0x1262                     else                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001256   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001258   c11a     MOVFF     0x11a,0xfe9                                                                                     
00125a   ffe9                                                                                                               
00125c   c11b     MOVFF     0x11b,0xfea                                                                                     
00125e   ffea                                                                                                               
001260   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
001262   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usb9\usb9.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                Microchip USB C18 Firmware Version 1.2                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * FileName:        usbdsc.c                                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Compiler:        C18 3.11+                                                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Naming Convention:                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Example:                                                                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * } cfg01                                                                       C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * explained for clarification.                                                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Assume the following example:                                                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * convention:                                                                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Adding a USB String                                                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * (Using index 02)                                                              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           #pragma romdata                                                                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               CDC_DEVICE,             // Class Code                                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x000A,                 // Product ID: CDC RS-232 Emulation Demo             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x0001,                 // Device release number in BCD format               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x01,                   // Manufacturer string index                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x02,                   // Product string index                              C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /* Configuration 1 Descriptor */                                                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           CFG01=                                                                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               2,                      // Number of interfaces in this cfg                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               1,                      // Number of endpoints in this intf                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               COMM_INTF,              // Class code                                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               ABSTRACT_CONTROL_MODEL, // Subclass code                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               V25TER,                 // Protocol code                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               /* CDC Class-Specific Descriptors */                                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_HEADER_FN_DSC),CS_INTERFACE,DSC_FN_HEADER,0x0110,             C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_ACM_FN_DSC),CS_INTERFACE,DSC_FN_ACM,0x02,                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_UNION_FN_DSC),CS_INTERFACE,DSC_FN_UNION,CDC_COMM_INTF_ID,CDC_DATA_INTF_ID, C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_CDC_CALL_MGT_FN_DSC),CS_INTERFACE,DSC_FN_CALL_MGT,0x00,CDC_DATA_INTF_ID, C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               /* Endpoint Descriptor */                                                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP02_IN,_INT,CDC_INT_EP_SIZE,0x02,                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               1,                      // Interface Number                                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               DATA_INTF,              // Class code                                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Subclass code                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               NO_PROTOCOL,            // Protocol code                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_OUT,_BULK,CDC_BULK_OUT_EP_SIZE,0x00,         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP03_IN,_BULK,CDC_BULK_IN_EP_SIZE,0x00            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd001={                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           sizeof(sd001),DSC_STR,                                                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           'M','i','c','r','o','c','h','i','p',' ',                                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           'T','e','c','h','n','o','l','o','g','y',' ','I','n','c','.'};                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd002={                   C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           sizeof(sd002),DSC_STR,                                                           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           'C','D','C',' ','R','S','-','2','3','2',' ',                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           'E','m','u','l','a','t','i','o','n',' ','D','e','m','o'};                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           // Added casting to suppress compiler warning                                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_CD_Ptr[]=                                       C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               (rom const unsigned char *rom)&cfg01,                                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               (rom const unsigned char *rom)&cfg01                                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_SD_Ptr[]=                                       C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               (rom const unsigned char *rom)&sd000,                                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               (rom const unsigned char *rom)&sd001,                                        C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               (rom const unsigned char *rom)&sd002                                         C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           rom pFunc ClassReqHandler[1]=                                                    C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                               &USBCheckCDCRequest                                                          C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           };                                                                               C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           C:\MCHPFSUSB\fw\Cdc\autofiles\usbdsc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.2                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 3.11+                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       05/14/07    Bug fixes.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007 (#F7)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           For a control transfer read, if the host tries to read more data                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           than what it has requested, the peripheral device should stall the               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           extra IN transactions and the status stage. Typically, a host does               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           not try to read more data than what it has requested. The original               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           firmware did not handle this situation. Instead of stalling extra                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           IN transactions, the device kept sending out zero length packets.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           The new variable introduced is used to keep track if a short IN                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           packet has been sent or not. From this the state machine can                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           decide if it should stall future extra IN transactions or not.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           byte short_pkt_status;              // Flag used by Control Transfer Read        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           byte USBCtrlEPService(void)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000838   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00083a   e10c     BNZ       0x854                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00083c   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00083e   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000840   5100     MOVF      0x0,0x0,0x1                                                                                     
000842   0b3c     ANDLW     0x3c                                                                                            
000844   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000846   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000848   080d     SUBLW     0xd                                                                                             
00084a   e102     BNZ       0x850                                                                                           
00084c   d80e     RCALL     0x86a                      USBCtrlTrfSetupHandler();                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00084e   d001     BRA       0x852                  else                                        // EP0 OUT                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000850   d846     RCALL     0x8de                      USBCtrlTrfOutHandler();                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000852   d008     BRA       0x864              else if(USTAT == EP00_IN)            	        // EP0 IN                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000854   0e04     MOVLW     0x4                                                                                             
000856   5c6c     SUBWF     0x6c,0x0,0x0                                                                                    
000858   e103     BNZ       0x860                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00085a   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00085c   d850     RCALL     0x8fe                  USBCtrlTrfInHandler();                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00085e   d002     BRA       0x864              else                                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000860   0e00     MOVLW     0x0                    return 0;           // Return '0', if not an EP0 transaction             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000862   d002     BRA       0x868                                                                                           
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000864   0e01     MOVLW     0x1                return 1;               // Return '1', if TRNIF has been cleared             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000866   d000     BRA       0x868                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000868   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00086a   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00086c   ffe6                                                                                                               
00086e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000870   ffd9                                                                                                               
000872   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007 (#F7 - Partial 1/4)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           For a control transfer read, if the host tries to read more data                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           than what it has requested, the peripheral device should stall the               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           extra IN transactions and the status stage. Typically, a host does               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           not try to read more data than what it has requested. The original               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           firmware did not handle this situation. Instead of stalling extra                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           IN transactions, the device kept sending out zero length packets.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This work around forces the IN endpoint back to be owned by the                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           CPU after if it was stalled previously. The short_pkt_status flag                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           is also re-initialized.                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000874   0104     MOVLB     0x4                if(ep0Bi.Stat.UOWN != 0)                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000876   bf04     BTFSC     0x4,0x7,0x1                                                                                     
000878   6b04     CLRF      0x4,0x1                ep0Bi.Stat._byte = _UCPU;           // Compensate for after a STALL      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00087a   0101     MOVLB     0x1                short_pkt_status = SHORT_PKT_NOT_USED;                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00087c   6b1e     CLRF      0x1e,0x1                                                                                        
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00087e   6b16     CLRF      0x16,0x1           ctrl_trf_state = WAIT_SETUP;                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000880   6b17     CLRF      0x17,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000882   6b1c     CLRF      0x1c,0x1           wCount._word = 0;                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000884   6b1d     CLRF      0x1d,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000886   ecac     CALL      0xf58,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000888   f007                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00088a   6adf     CLRF      0xdf,0x0           for(i=0;i < (sizeof(ClassReqHandler)/sizeof(pFunc));i++)                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00088c   50df     MOVF      0xdf,0x0,0x0                                                                                    
00088e   6e10     MOVWF     0x10,0x0                                                                                        
000890   6a11     CLRF      0x11,0x0                                                                                        
000892   0e01     MOVLW     0x1                                                                                             
000894   5c10     SUBWF     0x10,0x0,0x0                                                                                    
000896   0e00     MOVLW     0x0                                                                                             
000898   5811     SUBWFB    0x11,0x0,0x0                                                                                    
00089a   e21b     BC        0x8d2                                                                                           
0008ce   2adf     INCF      0xdf,0x1,0x0                                                                                    
0008d0   d7dd     BRA       0x88c                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00089c   0101     MOVLB     0x1                    if(ctrl_trf_session_owner != MUID_NULL)break;                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00089e   5117     MOVF      0x17,0x0,0x1                                                                                    
0008a0   e001     BZ        0x8a4                                                                                           
0008a2   d017     BRA       0x8d2                                                                                           
0008a4   6af7     CLRF      0xf7,0x0               ClassReqHandler[i]();               // See autofiles\usbdsc.c            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008a6   34df     RLCF      0xdf,0x0,0x0                                                                                    
0008a8   0bfe     ANDLW     0xfe                                                                                            
0008aa   36f7     RLCF      0xf7,0x1,0x0                                                                                    
0008ac   6ef6     MOVWF     0xf6,0x0                                                                                        
0008ae   0eaf     MOVLW     0xaf                                                                                            
0008b0   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
0008b2   0e18     MOVLW     0x18                                                                                            
0008b4   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
0008b6   0009     TBLRDPOSTINC                                                                                              
0008b8   cff5     MOVFF     0xff5,0x10                                                                                      
0008ba   f010                                                                                                               
0008bc   0008     TBLRD                                                                                                     
0008be   cff5     MOVFF     0xff5,0x11                                                                                      
0008c0   f011                                                                                                               
0008c2   d004     BRA       0x8cc                                                                                           
0008c4   c011     MOVFF     0x11,0xffa                                                                                      
0008c6   fffa                                                                                                               
0008c8   5010     MOVF      0x10,0x0,0x0                                                                                    
0008ca   6ef9     MOVWF     0xf9,0x0                                                                                        
0008cc   dffb     RCALL     0x8c4                                                                                           
                                               }//end while                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008d2   d8ee     RCALL     0xab0              USBCtrlEPServiceComplete();                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008d4   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008d6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0008d8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0008da   ffd9                                                                                                               
0008dc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008de   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008e0   0101     MOVLB     0x1                                                                                             
0008e2   5d16     SUBWF     0x16,0x0,0x1                                                                                    
0008e4   e10a     BNZ       0x8fa                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008e6   d8a7     RCALL     0xa36                  USBCtrlTrfRxService();                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008e8   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008ea   bd00     BTFSC     0x0,0x6,0x1                                                                                     
0008ec   d003     BRA       0x8f4                                                                                           
0008ee   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008f0   6f00     MOVWF     0x0,0x1                                                                                         
0008f2   d002     BRA       0x8f8                  else                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008f4   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008f6   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008f8   d001     BRA       0x8fc              else    // CTRL_TRF_TX                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008fa   d920     RCALL     0xb3c                  USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008fc   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0008fe   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000900   0100     MOVLB     0x0                                                                                             
000902   5dfc     SUBWF     0xfc,0x0,0x1                                                                                    
000904   e10a     BNZ       0x91a                                                                                           
000906   c422     MOVFF     0x422,0xf6e                                                                                     
000908   ff6e                                                                                                               
00090a   506e     MOVF      0x6e,0x0,0x0                                                                                    
00090c   0800     SUBLW     0x0                                                                                             
00090e   e203     BC        0x916                                                                                           
000910   0e05     MOVLW     0x5                                                                                             
000912   6ffc     MOVWF     0xfc,0x1                                                                                        
000914   d002     BRA       0x91a                                                                                           
000916   0e03     MOVLW     0x3                                                                                             
000918   6ffc     MOVWF     0xfc,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00091a   0101     MOVLB     0x1                if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00091c   0516     DECF      0x16,0x0,0x1                                                                                    
00091e   e112     BNZ       0x944                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000920   d813     RCALL     0x948                  USBCtrlTrfTxService();                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007 (#F7 - Partial 2/4)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           For a control transfer read, if the host tries to read more data                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           than what it has requested, the peripheral device should stall the               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           extra IN transactions and the status stage. Typically, a host does               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           not try to read more data than what it has requested. The original               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           firmware did not handle this situation. Instead of stalling extra                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           IN transactions, the device kept sending out zero length packets.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This work around checks if a short IN packet has been sent or not.               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           If it has, the IN endpoint will be set to install the next IN token.             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           If not, then the original endpoint setup code will be executed.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000922   0e02     MOVLW     0x2                    if(short_pkt_status == SHORT_PKT_SENT)                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000924   0101     MOVLB     0x1                                                                                             
000926   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
000928   e104     BNZ       0x932                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                       // If a short packet has been sent, don't want to send any more,     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                       // stall next time if host is still trying to read.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00092a   0104     MOVLB     0x4                        ep0Bi.Stat._byte = _USIE|_BSTALL;                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00092c   0e84     MOVLW     0x84                                                                                            
00092e   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000930   d008     BRA       0x942                  else                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000932   0104     MOVLB     0x4                        if(ep0Bi.Stat.DTS == 0)                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000934   bd04     BTFSC     0x4,0x6,0x1                                                                                     
000936   d003     BRA       0x93e                                                                                           
000938   0ec8     MOVLW     0xc8                           ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00093a   6f04     MOVWF     0x4,0x1                                                                                         
00093c   d002     BRA       0x942                      else                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00093e   0e88     MOVLW     0x88                           ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000940   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }//end if(...)else                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000942   d001     BRA       0x946              else // CTRL_TRF_RX                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000944   d8fb     RCALL     0xb3c                  USBPrepareForNextSetupTrf();                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000946   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000948   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00094a   ffe6                                                                                                               
00094c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00094e   ffd9                                                                                                               
000950   0e02     MOVLW     0x2                                                                                             
000952   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000954   0101     MOVLB     0x1                if(wCount._word < EP0_BUFF_SIZE)                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000956   0e08     MOVLW     0x8                                                                                             
000958   5d1c     SUBWF     0x1c,0x0,0x1                                                                                    
00095a   0e00     MOVLW     0x0                                                                                             
00095c   591d     SUBWFB    0x1d,0x0,0x1                                                                                    
00095e   e20e     BC        0x97c                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000960   c11c     MOVFF     0x11c,0xfde            byte_to_send._word = wCount._word;                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000962   ffde                                                                                                               
000964   c11d     MOVFF     0x11d,0xfdd                                                                                     
000966   ffdd                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007 (#F7 - Partial 3/4)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           For a control transfer read, if the host tries to read more data                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           than what it has requested, the peripheral device should stall the               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           extra IN transactions and the status stage. Typically, a host does               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           not try to read more data than what it has requested. The original               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           firmware did not handle this situation. Instead of stalling extra                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           IN transactions, the device kept sending out zero length packets.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This work around updates the short_pkt_status flag to indicate                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           if a short packet has been sent or not.                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000968   511e     MOVF      0x1e,0x0,0x1           if(short_pkt_status == SHORT_PKT_NOT_USED)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00096a   e103     BNZ       0x972                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00096c   0e01     MOVLW     0x1                        short_pkt_status = SHORT_PKT_PENDING;                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00096e   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000970   d004     BRA       0x97a                  else if(short_pkt_status == SHORT_PKT_PENDING)                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000972   051e     DECF      0x1e,0x0,0x1                                                                                    
000974   e102     BNZ       0x97a                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000976   0e02     MOVLW     0x2                        short_pkt_status = SHORT_PKT_SENT;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000978   6f1e     MOVWF     0x1e,0x1                                                                                        
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00097a   d003     BRA       0x982              else                                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00097c   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00097e   6ede     MOVWF     0xde,0x0                                                                                        
000980   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000982   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000984   9304     BCF       0x4,0x1,0x1                                                                                     
000986   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000988   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
00098a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00098c   1304     IORWF     0x4,0x1,0x1                                                                                     
00098e   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000990   f405                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000992   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000994   50db     MOVF      0xdb,0x0,0x0                                                                                    
000996   0101     MOVLB     0x1                                                                                             
000998   5f1c     SUBWF     0x1c,0x1,0x1                                                                                    
00099a   0e01     MOVLW     0x1                                                                                             
00099c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00099e   5b1d     SUBWFB    0x1d,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009a0   0e28     MOVLW     0x28               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009a2   6f1a     MOVWF     0x1a,0x1                                                                                        
0009a4   0e04     MOVLW     0x4                                                                                             
0009a6   6f1b     MOVWF     0x1b,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009a8   0100     MOVLB     0x0                if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009aa   a3fd     BTFSS     0xfd,0x1,0x1                                                                                    
0009ac   d01e     BRA       0x9ea                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009ae   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009b0   ffe9                                                                                                               
0009b2   cfda     MOVFF     0xfda,0xfea                                                                                     
0009b4   ffea                                                                                                               
0009b6   50ee     MOVF      0xee,0x0,0x0                                                                                    
0009b8   10ed     IORWF     0xed,0x0,0x0                                                                                    
0009ba   e016     BZ        0x9e8                                                                                           
0009e6   d7e3     BRA       0x9ae                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009bc   c118     MOVFF     0x118,0xff6                *pDst.bRam = *pSrc.bRom;                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009be   fff6                                                                                                               
0009c0   c119     MOVFF     0x119,0xff7                                                                                     
0009c2   fff7                                                                                                               
0009c4   0008     TBLRD                                                                                                     
0009c6   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0009c8   c11a     MOVFF     0x11a,0xfe9                                                                                     
0009ca   ffe9                                                                                                               
0009cc   c11b     MOVFF     0x11b,0xfea                                                                                     
0009ce   ffea                                                                                                               
0009d0   6eef     MOVWF     0xef,0x0                                                                                        
0009d2   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009d4   2b1a     INCF      0x1a,0x1,0x1                                                                                    
0009d6   0e00     MOVLW     0x0                                                                                             
0009d8   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
0009da   2b18     INCF      0x18,0x1,0x1               pSrc.bRom++;                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009dc   2319     ADDWFC    0x19,0x1,0x1                                                                                    
0009de   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009e0   0e01     MOVLW     0x1                                                                                             
0009e2   e201     BC        0x9e6                                                                                           
0009e4   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009e8   d01c     BRA       0xa22              else // RAM                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009ea   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009ec   ffe9                                                                                                               
0009ee   cfda     MOVFF     0xfda,0xfea                                                                                     
0009f0   ffea                                                                                                               
0009f2   50ee     MOVF      0xee,0x0,0x0                                                                                    
0009f4   10ed     IORWF     0xed,0x0,0x0                                                                                    
0009f6   e015     BZ        0xa22                                                                                           
000a20   d7e4     BRA       0x9ea                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009f8   c118     MOVFF     0x118,0xfe9                *pDst.bRam = *pSrc.bRam;                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
0009fa   ffe9                                                                                                               
0009fc   c119     MOVFF     0x119,0xfea                                                                                     
0009fe   ffea                                                                                                               
000a00   50ef     MOVF      0xef,0x0,0x0                                                                                    
000a02   c11a     MOVFF     0x11a,0xfe9                                                                                     
000a04   ffe9                                                                                                               
000a06   c11b     MOVFF     0x11b,0xfea                                                                                     
000a08   ffea                                                                                                               
000a0a   6eef     MOVWF     0xef,0x0                                                                                        
000a0c   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a0e   2b1a     INCF      0x1a,0x1,0x1                                                                                    
000a10   0e00     MOVLW     0x0                                                                                             
000a12   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
000a14   2b18     INCF      0x18,0x1,0x1               pSrc.bRam++;                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a16   2319     ADDWFC    0x19,0x1,0x1                                                                                    
000a18   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a1a   0e01     MOVLW     0x1                                                                                             
000a1c   e201     BC        0xa20                                                                                           
000a1e   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a22   0e02     MOVLW     0x2            }//end USBCtrlTrfTxService                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a24   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000a26   e202     BC        0xa2c                                                                                           
000a28   6ae1     CLRF      0xe1,0x0                                                                                        
000a2a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a2c   6ee1     MOVWF     0xe1,0x0                                                                                        
000a2e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a30   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000a32   ffd9                                                                                                               
000a34   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a36   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a38   ffe6                                                                                                               
000a3a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000a3c   ffd9                                                                                                               
000a3e   0e02     MOVLW     0x2                                                                                             
000a40   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a42   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a44   0104     MOVLB     0x4                                                                                             
000a46   1500     ANDWF     0x0,0x0,0x1                                                                                     
000a48   6ee7     MOVWF     0xe7,0x0                                                                                        
000a4a   0e01     MOVLW     0x1                                                                                             
000a4c   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
000a4e   ffdb                                                                                                               
000a50   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a52   ffdf                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a54   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a56   0101     MOVLB     0x1                                                                                             
000a58   271c     ADDWF     0x1c,0x1,0x1                                                                                    
000a5a   50dd     MOVF      0xdd,0x0,0x0                                                                                    
000a5c   231d     ADDWFC    0x1d,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a5e   0e28     MOVLW     0x28               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a60   6f18     MOVWF     0x18,0x1                                                                                        
000a62   0e04     MOVLW     0x4                                                                                             
000a64   6f19     MOVWF     0x19,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a66   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a68   ffe9                                                                                                               
000a6a   cfda     MOVFF     0xfda,0xfea                                                                                     
000a6c   ffea                                                                                                               
000a6e   50ee     MOVF      0xee,0x0,0x0                                                                                    
000a70   10ed     IORWF     0xed,0x0,0x0                                                                                    
000a72   e014     BZ        0xa9c                                                                                           
000a9a   d7e5     BRA       0xa66                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a74   c118     MOVFF     0x118,0xfe9            *pDst.bRam = *pSrc.bRam;                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a76   ffe9                                                                                                               
000a78   c119     MOVFF     0x119,0xfea                                                                                     
000a7a   ffea                                                                                                               
000a7c   50ef     MOVF      0xef,0x0,0x0                                                                                    
000a7e   c11a     MOVFF     0x11a,0xfe9                                                                                     
000a80   ffe9                                                                                                               
000a82   c11b     MOVFF     0x11b,0xfea                                                                                     
000a84   ffea                                                                                                               
000a86   6eef     MOVWF     0xef,0x0                                                                                        
000a88   2b1a     INCF      0x1a,0x1,0x1           pDst.bRam++;                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a8a   0e00     MOVLW     0x0                                                                                             
000a8c   231b     ADDWFC    0x1b,0x1,0x1                                                                                    
000a8e   2b18     INCF      0x18,0x1,0x1           pSrc.bRam++;                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a90   2319     ADDWFC    0x19,0x1,0x1                                                                                    
000a92   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a94   0e01     MOVLW     0x1                                                                                             
000a96   e201     BC        0xa9a                                                                                           
000a98   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a9c   0e02     MOVLW     0x2            }//end USBCtrlTrfRxService                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000a9e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000aa0   e202     BC        0xaa6                                                                                           
000aa2   6ae1     CLRF      0xe1,0x0                                                                                        
000aa4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000aa6   6ee1     MOVWF     0xe1,0x0                                                                                        
000aa8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000aaa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000aac   ffd9                                                                                                               
000aae   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007 (#AF1)                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           See silicon errata for 4550 A3. Now clearing PKTDIS before re-arming             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           any EP0 endpoints.                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ab0   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ab2   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ab4   5117     MOVF      0x17,0x0,0x1                                                                                    
000ab6   e10c     BNZ       0xad0                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ab8   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000aba   0e08     MOVLW     0x8                                                                                             
000abc   6f01     MOVWF     0x1,0x1                                                                                         
000abe   0e20     MOVLW     0x20                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ac0   6f02     MOVWF     0x2,0x1                                                                                         
000ac2   0e04     MOVLW     0x4                                                                                             
000ac4   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ac6   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ac8   6f00     MOVWF     0x0,0x1                                                                                         
000aca   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000acc   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ace   d035     BRA       0xb3a              else    // A module has claimed ownership of the control transfer session.   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ad0   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ad2   af20     BTFSS     0x20,0x7,0x1                                                                                    
000ad4   d022     BRA       0xb1a                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ad6   0101     MOVLB     0x1                        if(SetupPkt.wLength < wCount._word)                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000ad8   511c     MOVF      0x1c,0x0,0x1                                                                                    
000ada   0104     MOVLB     0x4                                                                                             
000adc   5d26     SUBWF     0x26,0x0,0x1                                                                                    
000ade   0101     MOVLB     0x1                                                                                             
000ae0   511d     MOVF      0x1d,0x0,0x1                                                                                    
000ae2   0104     MOVLB     0x4                                                                                             
000ae4   5927     SUBWFB    0x27,0x0,0x1                                                                                    
000ae6   e204     BC        0xaf0                                                                                           
000ae8   c426     MOVFF     0x426,0x11c                    wCount._word = SetupPkt.wLength;                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000aea   f11c                                                                                                               
000aec   c427     MOVFF     0x427,0x11d                                                                                     
000aee   f11d                                                                                                               
000af0   df2b     RCALL     0x948                      USBCtrlTrfTxService();                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000af2   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000af4   0e01     MOVLW     0x1                                                                                             
000af6   6f16     MOVWF     0x16,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000af8   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000afa   0e08     MOVLW     0x8                                                                                             
000afc   6f01     MOVWF     0x1,0x1                                                                                         
000afe   0e20     MOVLW     0x20                       ep0Bo.ADR = (byte*)&SetupPkt;                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b00   6f02     MOVWF     0x2,0x1                                                                                         
000b02   0e04     MOVLW     0x4                                                                                             
000b04   6f03     MOVWF     0x3,0x1                                                                                         
000b06   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b08   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b0a   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b0c   0e28     MOVLW     0x28                                                                                            
000b0e   6f06     MOVWF     0x6,0x1                                                                                         
000b10   0e04     MOVLW     0x4                                                                                             
000b12   6f07     MOVWF     0x7,0x1                                                                                         
000b14   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b16   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b18   d010     BRA       0xb3a                  else    // (SetupPkt.DataDir == HOST_TO_DEV)                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b1a   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b1c   0e02     MOVLW     0x2                                                                                             
000b1e   6f16     MOVWF     0x16,0x1                                                                                        
                                                       /*                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b20   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b22   6b05     CLRF      0x5,0x1                                                                                         
000b24   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b26   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b28   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b2a   0e08     MOVLW     0x8                                                                                             
000b2c   6f01     MOVWF     0x1,0x1                                                                                         
000b2e   0e28     MOVLW     0x28                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b30   6f02     MOVWF     0x2,0x1                                                                                         
000b32   0e04     MOVLW     0x4                                                                                             
000b34   6f03     MOVWF     0x3,0x1                                                                                         
000b36   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b38   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b3a   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b3c   cfd9     MOVFF     0xfd9,0xfe6    void USBPrepareForNextSetupTrf(void)                                             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b3e   ffe6                                                                                                               
000b40   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000b42   ffd9                                                                                                               
000b44   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Facts:                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           A Setup Packet should never be stalled. (USB 2.0 Section 8.5.3)                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           If a Setup PID is detected by the SIE, the DTSEN setting is ignored.             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This causes a problem at the end of a control write transaction.                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           In USBCtrlEPServiceComplete(), during a control write (Host to Device),          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           the EP0_OUT is setup to write any data to the CtrlTrfData buffer.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           If <SETUP[0]><IN[1]> is completed and USBCtrlTrfInHandler() is not               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           called before the next <SETUP[0]> is received, then the latest Setup             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           data will be written to the CtrlTrfData buffer instead of the SetupPkt           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           buffer.                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           If USBCtrlTrfInHandler() was called before the latest <SETUP[0]> is              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           received, then there would be no problem,                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           because USBPrepareForNextSetupTrf() would have been called and updated           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ep0Bo.ADR to point to the SetupPkt buffer.                                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Work around:                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Check for the problem as described above and copy the Setup data from            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           CtrlTrfData to SetupPkt.                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b46   0e02     MOVLW     0x2                if((ctrl_trf_state == CTRL_TRF_RX) &&                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b48   0101     MOVLB     0x1                                                                                             
000b4a   5d16     SUBWF     0x16,0x0,0x1                                                                                    
000b4c   e136     BNZ       0xbba                 (UCONbits.PKTDIS == 1) &&                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b4e   506d     MOVF      0x6d,0x0,0x0                                                                                    
000b50   0b10     ANDLW     0x10                                                                                            
000b52   e033     BZ        0xbba                                                                                           
000b54   0104     MOVLB     0x4                   (ep0Bo.Cnt == sizeof(CTRL_TRF_SETUP)) &&                                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b56   5101     MOVF      0x1,0x0,0x1                                                                                     
000b58   6e10     MOVWF     0x10,0x0                                                                                        
000b5a   6a11     CLRF      0x11,0x0                                                                                        
000b5c   0e08     MOVLW     0x8                                                                                             
000b5e   1810     XORWF     0x10,0x0,0x0                                                                                    
000b60   e101     BNZ       0xb64                                                                                           
000b62   5011     MOVF      0x11,0x0,0x0                                                                                    
000b64   e12a     BNZ       0xbba                                                                                           
000b66   5100     MOVF      0x0,0x0,0x1           (ep0Bo.Stat.PID == SETUP_TOKEN) &&                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b68   0b3c     ANDLW     0x3c                                                                                            
000b6a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000b6c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000b6e   080d     SUBLW     0xd                                                                                             
000b70   e124     BNZ       0xbba                                                                                           
000b72   5100     MOVF      0x0,0x0,0x1           (ep0Bo.Stat.UOWN == 0))                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b74   0b80     ANDLW     0x80                                                                                            
000b76   e121     BNZ       0xbba                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   unsigned char setup_cnt;                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b78   0e20     MOVLW     0x20                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b7a   6f02     MOVWF     0x2,0x1                                                                                         
000b7c   0e04     MOVLW     0x4                                                                                             
000b7e   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   // The Setup data was written to the CtrlTrfData buffer, must copy       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   // it back to the SetupPkt buffer so that it can be processed correctly  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   // by USBCtrlTrfSetupHandler().                                          C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b80   6adf     CLRF      0xdf,0x0               for(setup_cnt = 0; setup_cnt < sizeof(CTRL_TRF_SETUP); setup_cnt++)      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b82   50df     MOVF      0xdf,0x0,0x0                                                                                    
000b84   6e10     MOVWF     0x10,0x0                                                                                        
000b86   6a11     CLRF      0x11,0x0                                                                                        
000b88   0e08     MOVLW     0x8                                                                                             
000b8a   5c10     SUBWF     0x10,0x0,0x0                                                                                    
000b8c   0e00     MOVLW     0x0                                                                                             
000b8e   5811     SUBWFB    0x11,0x0,0x0                                                                                    
000b90   e213     BC        0xbb8                                                                                           
000bb4   2adf     INCF      0xdf,0x1,0x0                                                                                    
000bb6   d7e5     BRA       0xb82                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b92   50df     MOVF      0xdf,0x0,0x0               *(((byte*)&SetupPkt)+setup_cnt) = *(((byte*)&CtrlTrfData)+setup_cnt); C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000b94   6aea     CLRF      0xea,0x0                                                                                        
000b96   0f28     ADDLW     0x28                                                                                            
000b98   6ee9     MOVWF     0xe9,0x0                                                                                        
000b9a   0e04     MOVLW     0x4                                                                                             
000b9c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000b9e   50ef     MOVF      0xef,0x0,0x0                                                                                    
000ba0   6ee6     MOVWF     0xe6,0x0                                                                                        
000ba2   50df     MOVF      0xdf,0x0,0x0                                                                                    
000ba4   6aea     CLRF      0xea,0x0                                                                                        
000ba6   0f20     ADDLW     0x20                                                                                            
000ba8   6ee9     MOVWF     0xe9,0x0                                                                                        
000baa   0e04     MOVLW     0x4                                                                                             
000bac   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000bae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bb0   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000bb2   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end for                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /*******************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bb8   d00d     BRA       0xbd4              else                                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bba   0101     MOVLB     0x1                    ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h              C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bbc   6b16     CLRF      0x16,0x1                                                                                        
000bbe   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bc0   0e08     MOVLW     0x8                                                                                             
000bc2   6f01     MOVWF     0x1,0x1                                                                                         
000bc4   0e20     MOVLW     0x20                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bc6   6f02     MOVWF     0x2,0x1                                                                                         
000bc8   0e04     MOVLW     0x4                                                                                             
000bca   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007 (#F1)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           In the original firmware, if an OUT token is sent by the host                    C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           before a SETUP token is sent, the firmware would respond with an ACK.            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This is not a correct response, the firmware should have sent a STALL.           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This is a minor non-compliance since a compliant host should not                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           send an OUT before sending a SETUP token. The fix allows a SETUP                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           transaction to be accepted while stalling OUT transactions.                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                   //ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;        // Removed               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bcc   0e8c     MOVLW     0x8c                   ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN|_BSTALL;  // Added #F1             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bce   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Bug Fix: May 14, 2007 (#F3)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           *********************************************************************            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           In the original firmware, if an IN token is sent by the host                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           before a SETUP token is sent, the firmware would respond with an ACK.            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This is not a correct response, the firmware should have sent a STALL.           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           This is a minor non-compliance since a compliant host should not                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           send an IN before sending a SETUP token. The fix allows a SETUP                  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           transaction to be accepted while stalling IN transactions.                       C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Although this fix is known, it is not implemented because it                     C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           breaks the #AF1 fix in USBCtrlEPServiceComplete().                               C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           Since #AF1 fix is more important, this fix, #F3 is commented out.                C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           ********************************************************************/            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bd0   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _UCPU;               // Should be removed             C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bd2   6b04     CLRF      0x4,0x1                                                                                         
                                                   //ep0Bi.Stat._byte = _USIE|_BSTALL;     // Should be added #F3           C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(...)else(...)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bd4   52e5     MOVF      0xe5,0x1,0x0   }//end USBPrepareForNextSetupTrf                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
000bd6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bd8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000bda   ffd9                                                                                                               
000bdc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                Microchip USB C18 Firmware Version 1.2                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * FileName:        user.c                                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Compiler:        C18 3.11+                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Rawin Rojvanit       05/14/07    A few updates.                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * CDC RS-232 Emulation Tutorial Instructions:                                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            ******************************************************************************  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Refer to Application Note AN956 for explanation of the CDC class.             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * First take a look at Exercise_Example() and study how functions are called.   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * There are five exercises, each one has a solution in the CDC\user\solutions.  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Scroll down and look for Exercise_01,_02,_03,_04, and _05.                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Instructions on what to do is inside each function.                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #include "io_cfg.h"             // I/O pin mapping                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #include "user\user.h"                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #include "user\temperature.h"                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           byte old_sw2,old_sw3;                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           char input_buffer[64];                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           char output_buffer[64];                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           rom char welcome[]={"Full-Speed USB - CDC RS-232 Emulation Demo\r\n\r\n"};       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           rom char ansi_clrscr[]={"\x1b[2J"};         // ANSI Clear Screen Command         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void InitializeUSART(void);                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void BlinkUSBStatus(void);                                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           BOOL Switch2IsPressed(void);                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           BOOL Switch3IsPressed(void);                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_Example(void);                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_01(void);                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_02(void);                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_03(void);                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_04(void);                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_05(void);                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void UserInit(void)                                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
001264   0ef0     MOVLW     0xf0               mInitAllLEDs();                                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
001266   168c     ANDWF     0x8c,0x1,0x0                                                                                    
001268   1695     ANDWF     0x95,0x1,0x0                                                                                    
00126a   8893     BSF       0x93,0x4,0x0       mInitAllSwitches();                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
00126c   8a93     BSF       0x93,0x5,0x0                                                                                    
00126e   5081     MOVF      0x81,0x0,0x0       old_sw2 = sw2;                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
001270   0b10     ANDLW     0x10                                                                                            
001272   e001     BZ        0x1276                                                                                          
001274   0e01     MOVLW     0x1                                                                                             
001276   0100     MOVLB     0x0                                                                                             
001278   6f60     MOVWF     0x60,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               #if defined(PIC18F4550_PICDEM_FS_USB)                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00127a   5081     MOVF      0x81,0x0,0x0       old_sw3 = sw3;                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
00127c   0b20     ANDLW     0x20                                                                                            
00127e   e001     BZ        0x1282                                                                                          
001280   0e01     MOVLW     0x1                                                                                             
001282   6f61     MOVWF     0x61,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001284   ec23     CALL      0x1646,0x0         InitTempSensor();                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001286   f00b                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               #endif                                                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001288   ef46     GOTO      0x128c             InitializeUSART();                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
00128a   f009                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           }//end UserInit                                                                  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void InitializeUSART(void)                                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
00128c   8e94     BSF       0x94,0x7,0x0       TRISCbits.TRISC7=1; // RX                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
00128e   9c94     BCF       0x94,0x6,0x0       TRISCbits.TRISC6=0; // TX                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
001290   0e71     MOVLW     0x71               SPBRG = 0x71;                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
001292   6eaf     MOVWF     0xaf,0x0                                                                                        
001294   0e02     MOVLW     0x2                SPBRGH = 0x02;      // 0x0271 for 48MHz -> 19200 baud                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001296   6eb0     MOVWF     0xb0,0x0                                                                                        
001298   0e24     MOVLW     0x24               TXSTA = 0x24;       // TX enable BRGH=1                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
00129a   6eac     MOVWF     0xac,0x0                                                                                        
00129c   0e90     MOVLW     0x90               RCSTA = 0x90;       // continuous RX                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
00129e   6eab     MOVWF     0xab,0x0                                                                                        
0012a0   0e08     MOVLW     0x8                BAUDCON = 0x08;     // BRG16 = 1                                             C:\MCHPFSUSB\fw\Cdc\user\user.c
0012a2   6eb8     MOVWF     0xb8,0x0                                                                                        
0012a4   0012     RETURN    0x0            }//end InitializeUSART                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0012a6   cfd9     MOVFF     0xfd9,0xfe6    void putsUSART(char *data)                                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
0012a8   ffe6                                                                                                               
0012aa   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0012ac   ffd9                                                                                                               
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                             do                                                                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                             {  // Transmit a byte                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
0012ae   a2ac     BTFSS     0xac,0x1,0x0       while(!TXSTAbits.TRMT);                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
0012b0   d7fe     BRA       0x12ae                                                                                          
0012b2   0efd     MOVLW     0xfd               TXREG = *data;      // Write the data byte to the USART, 8-bit mode only     C:\MCHPFSUSB\fw\Cdc\user\user.c
0012b4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0012b6   ffe9                                                                                                               
0012b8   0efe     MOVLW     0xfe                                                                                            
0012ba   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0012bc   ffea                                                                                                               
0012be   50ef     MOVF      0xef,0x0,0x0                                                                                    
0012c0   6ead     MOVWF     0xad,0x0                                                                                        
0012c2   0efd     MOVLW     0xfd             } while( *data++ );                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0012c4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0012c6   ffe9                                                                                                               
0012c8   2adb     INCF      0xdb,0x1,0x0                                                                                    
0012ca   0efe     MOVLW     0xfe                                                                                            
0012cc   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0012ce   ffea                                                                                                               
0012d0   e301     BNC       0x12d4                                                                                          
0012d2   2adb     INCF      0xdb,0x1,0x0                                                                                    
0012d4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0012d6   e1eb     BNZ       0x12ae                                                                                          
0012d8   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
0012da   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0012dc   ffd9                                                                                                               
0012de   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Function:        void ProcessIO(void)                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Overview:        This function is a place holder for other user routines.     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                  It is a mixture of both USB and non-USB tasks.               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void ProcessIO(void)                                                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
0012e0   d867     RCALL     0x13b0             BlinkUSBStatus();                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               // User Application USB tasks                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
0012e2   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\MCHPFSUSB\fw\Cdc\user\user.c
0012e4   0100     MOVLB     0x0                                                                                             
0012e6   5dfc     SUBWF     0xfc,0x0,0x1                                                                                    
0012e8   e303     BNC       0x12f0                                                                                          
0012ea   506d     MOVF      0x6d,0x0,0x0                                                                                    
0012ec   0b02     ANDLW     0x2                                                                                             
0012ee   e001     BZ        0x12f2                                                                                          
0012f0   d006     BRA       0x12fe                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0012f2   d806     RCALL     0x1300             Exercise_Example();                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0012f4   d840     RCALL     0x1376             Exercise_01();                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
0012f6   d840     RCALL     0x1378             Exercise_02();                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
0012f8   d840     RCALL     0x137a             Exercise_03();                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
0012fa   d840     RCALL     0x137c             Exercise_04();                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
0012fc   d840     RCALL     0x137e             Exercise_05();                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0012fe   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_Example(void)                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               static byte start_up_state = 0;                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001300   0101     MOVLB     0x1                if(start_up_state == 0)                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
001302   5122     MOVF      0x22,0x0,0x1                                                                                    
001304   e106     BNZ       0x1312                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001306   d89c     RCALL     0x1440                 if(Switch2IsPressed())                                                   C:\MCHPFSUSB\fw\Cdc\user\user.c
001308   0900     IORLW     0x0                                                                                             
00130a   e002     BZ        0x1310                                                                                          
00130c   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
00130e   2b22     INCF      0x22,0x1,0x1                                                                                    
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001310   d031     BRA       0x1374             else if(start_up_state == 1)                                                 C:\MCHPFSUSB\fw\Cdc\user\user.c
001312   0522     DECF      0x22,0x0,0x1                                                                                    
001314   e10e     BNZ       0x1332                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001316   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
001318   51e5     MOVF      0xe5,0x0,0x1                                                                                    
00131a   e10a     BNZ       0x1330                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
00131c   0ee5     MOVLW     0xe5                       putrsUSBUSART(ansi_clrscr);                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
00131e   6ee6     MOVWF     0xe6,0x0                                                                                        
001320   0e19     MOVLW     0x19                                                                                            
001322   6ee6     MOVWF     0xe6,0x0                                                                                        
001324   ecf6     CALL      0xdec,0x0                                                                                       
001326   f006                                                                                                               
001328   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00132a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00132c   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
00132e   2b22     INCF      0x22,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001330   d021     BRA       0x1374             else if(start_up_state == 2)                                                 C:\MCHPFSUSB\fw\Cdc\user\user.c
001332   0e02     MOVLW     0x2                                                                                             
001334   5d22     SUBWF     0x22,0x0,0x1                                                                                    
001336   e10e     BNZ       0x1354                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001338   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
00133a   51e5     MOVF      0xe5,0x0,0x1                                                                                    
00133c   e10a     BNZ       0x1352                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
00133e   0e68     MOVLW     0x68                       putrsUSBUSART("\rMicrochip Technology Inc., 2007\r\n");              C:\MCHPFSUSB\fw\Cdc\user\user.c
001340   6ee6     MOVWF     0xe6,0x0                                                                                        
001342   0e1a     MOVLW     0x1a                                                                                            
001344   6ee6     MOVWF     0xe6,0x0                                                                                        
001346   ecf6     CALL      0xdec,0x0                                                                                       
001348   f006                                                                                                               
00134a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00134c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00134e   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
001350   2b22     INCF      0x22,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001352   d010     BRA       0x1374             else if(start_up_state == 3)                                                 C:\MCHPFSUSB\fw\Cdc\user\user.c
001354   0e03     MOVLW     0x3                                                                                             
001356   5d22     SUBWF     0x22,0x0,0x1                                                                                    
001358   e10d     BNZ       0x1374                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00135a   0100     MOVLB     0x0                    if(mUSBUSARTIsTxTrfReady())                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
00135c   51e5     MOVF      0xe5,0x0,0x1                                                                                    
00135e   e10a     BNZ       0x1374                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001360   0eb6     MOVLW     0xb6                       putrsUSBUSART(welcome);                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
001362   6ee6     MOVWF     0xe6,0x0                                                                                        
001364   0e19     MOVLW     0x19                                                                                            
001366   6ee6     MOVWF     0xe6,0x0                                                                                        
001368   ecf6     CALL      0xdec,0x0                                                                                       
00136a   f006                                                                                                               
00136c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00136e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001370   0101     MOVLB     0x1                        start_up_state++;                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
001372   2b22     INCF      0x22,0x1,0x1                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001374   0012     RETURN    0x0            }//end Exercise_Example                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_01(void)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Write code in this function that sends a literal null-terminated          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * string of text ("Hello World!\r\n") to the PC when switch 2 is            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * pressed.                                                                  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  Switch2IsPressed() returns '1' when switch 2 is pressed.                 C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  putrsUSBUSART(...);                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * See examples in Exercise_Example();                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* Insert code here - 3 lines */                                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001376   0012     RETURN    0x0            }//end Exercise_01                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           rom char ex02_string[]={"Type in a string here.\r\n"};                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_02(void)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Write code in this function that sends a null-terminated string           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * of text stored in program memory pointed to by "ex02_string" to           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * the PC when switch 3 is pressed.                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * ex02_string is declared right above this function.                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  Switch3IsPressed() returns '1' when switch 3 is pressed.                 C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  putrsUSBUSART(...);                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * See examples in Exercise_Example();                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* Insert code here - 3 lines*/                                              C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001378   0012     RETURN    0x0            }//end Exercise_02                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_03(void)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Write code in this function that reads data from USB and                  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * toggles LED D4 when the data read equals ASCII character '1' (0x31)       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  byte getsUSBUSART(char *buffer, byte len)   See cdc.c for details        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  mLED_4_Toggle();                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Use input_buffer[] to store data read from USB.                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* Insert code here - 3 lines */                                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00137a   0012     RETURN    0x0            }//end Exercise_03                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_04(void)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Before starting Exercise_04(), comment out the call to Exercise_01()      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * in ProcessIO(); This function will need to check Switch2IsPressed().      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Write code in this function that sends the following 4 bytes of           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * data: 0x30,0x31,0x32,0x33 when switch 2 is pressed.                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Note that these data is not null-terminated and is located in             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * the data memory.                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Useful functions:                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  Switch2IsPressed() returns '1' when switch 2 is pressed.                 C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  mUSBUSARTTxRam(byte *pData, byte len) See cdc.h for details.             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Use output_buffer[] to store the four bytes data.                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* Insert code here - 7 lines */                                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /* End */                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00137c   0012     RETURN    0x0            }//end Exercise_04                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void Exercise_05(void)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * The PICDEM Full-Speed USB Demo Board is equipped with a                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * temperature sensor. See temperature.c & .h for details.                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * All necessary functions to collect temperature data have                  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * been called. This function updates the data a few times                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * every second. The program currently sends out the                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * temperature data to the PC via UART.                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * You can check this by hooking up a serial cable and                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * set your serial port to 19200 baud, 8 bit data, 1 Stop,                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * no parity.                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * The program assumes CPU Frequency = 48 MHz to generate                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * the correct SPBRG value for 19200 baud transmission.                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Modify the code to send the ASCII string stored in                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * tempString to the PC via USB instead of UART.                             C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * The temperature data is stored in tempString array in                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * ASCII format and is null-terminated.                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Useful function:                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  putsUSBUSART(...);                                                       C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *  Note: It is 'puts' and not 'putrs' to be used here.                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * Remember, you must check if cdc_trf_state is ready for another            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * transfer or not. When it is ready, the value will equal CDC_TX_READY,     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                * or use macro: mUSBUSARTIsTxTrfReady()                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               static word ex05_count;                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00137e   0100     MOVLB     0x0                if(ex05_count == 0)                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
001380   51e2     MOVF      0xe2,0x0,0x1                                                                                    
001382   11e3     IORWF     0xe3,0x0,0x1                                                                                    
001384   e111     BNZ       0x13a8                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                   #if defined(PIC18F4550_PICDEM_FS_USB)                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
001386   ec36     CALL      0x166c,0x0             AcquireTemperature();               // Read temperature from sensor      C:\MCHPFSUSB\fw\Cdc\user\user.c
001388   f00b                                                                                                               
                                                   #endif                                                                   C:\MCHPFSUSB\fw\Cdc\user\user.c
00138a   ec47     CALL      0x168e,0x0             UpdateCelsiusASCII();               // Convert to ASCII, stored in       C:\MCHPFSUSB\fw\Cdc\user\user.c
00138c   f00b                                                                                                               
                                                                                       // "tempString", See temperature.c   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                   /* Modify the code below - 3 lines */                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00138e   0e02     MOVLW     0x2                        putsUSART(tempString);                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
001390   6ee6     MOVWF     0xe6,0x0                                                                                        
001392   0e01     MOVLW     0x1                                                                                             
001394   6ee6     MOVWF     0xe6,0x0                                                                                        
001396   df87     RCALL     0x12a6                                                                                          
001398   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00139a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00139c   0100     MOVLB     0x0                        ex05_count = 10000;                                                  C:\MCHPFSUSB\fw\Cdc\user\user.c
00139e   0e10     MOVLW     0x10                                                                                            
0013a0   6fe2     MOVWF     0xe2,0x1                                                                                        
0013a2   0e27     MOVLW     0x27                                                                                            
0013a4   6fe3     MOVWF     0xe3,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                   /* End */                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013a6   d003     BRA       0x13ae             else                                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
0013a8   07e2     DECF      0xe2,0x1,0x1           ex05_count--;                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013aa   0e00     MOVLW     0x0                                                                                             
0013ac   5be3     SUBWFB    0xe3,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013ae   0012     RETURN    0x0            }//end Exercise_05                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Function:        void BlinkUSBStatus(void)                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Overview:        BlinkUSBStatus turns on and off LEDs corresponding to        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                  the USB device state.                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            * Note:            mLED macros can be found in io_cfg.h                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                  usb_device_state is declared in usbmmap.c and is modified    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *                  in usbdrv.c, usbctrltrf.c, and usb9.c                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           void BlinkUSBStatus(void)                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               static word led_count=0;                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013b0   0101     MOVLB     0x1                if(led_count == 0)led_count = 10000U;                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
0013b2   5123     MOVF      0x23,0x0,0x1                                                                                    
0013b4   1124     IORWF     0x24,0x0,0x1                                                                                    
0013b6   e104     BNZ       0x13c0                                                                                          
0013b8   0e10     MOVLW     0x10                                                                                            
0013ba   6f23     MOVWF     0x23,0x1                                                                                        
0013bc   0e27     MOVLW     0x27                                                                                            
0013be   6f24     MOVWF     0x24,0x1                                                                                        
0013c0   0723     DECF      0x23,0x1,0x1       led_count--;                                                                 C:\MCHPFSUSB\fw\Cdc\user\user.c
0013c2   0e00     MOVLW     0x0                                                                                             
0013c4   5b24     SUBWFB    0x24,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               #define mLED_Both_Off()         {mLED_1_Off();mLED_2_Off();}                 C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               #define mLED_Both_On()          {mLED_1_On();mLED_2_On();}                   C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               #define mLED_Only_1_On()        {mLED_1_On();mLED_2_Off();}                  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               #define mLED_Only_2_On()        {mLED_1_Off();mLED_2_On();}                  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013c6   a26d     BTFSS     0x6d,0x1,0x0       if(UCONbits.SUSPND == 1)                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
0013c8   d00b     BRA       0x13e0                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013ca   5123     MOVF      0x23,0x0,0x1           if(led_count==0)                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
0013cc   1124     IORWF     0x24,0x0,0x1                                                                                    
0013ce   e107     BNZ       0x13de                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
0013d0   708c     BTG       0x8c,0x0,0x0               mLED_1_Toggle();                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
0013d2   508c     MOVF      0x8c,0x0,0x0               mLED_2 = mLED_1;        // Both blink at the same time               C:\MCHPFSUSB\fw\Cdc\user\user.c
0013d4   0b01     ANDLW     0x1                                                                                             
0013d6   e002     BZ        0x13dc                                                                                          
0013d8   828c     BSF       0x8c,0x1,0x0                                                                                    
0013da   d001     BRA       0x13de                                                                                          
0013dc   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013de   d02f     BRA       0x143e             else                                                                         C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
0013e0   0100     MOVLB     0x0                    if(usb_device_state == DETACHED_STATE)                                   C:\MCHPFSUSB\fw\Cdc\user\user.c
0013e2   51fc     MOVF      0xfc,0x0,0x1                                                                                    
0013e4   e103     BNZ       0x13ec                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
0013e6   908c     BCF       0x8c,0x0,0x0               mLED_Both_Off();                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
0013e8   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
0013ea   d029     BRA       0x143e                 else if(usb_device_state == ATTACHED_STATE)                              C:\MCHPFSUSB\fw\Cdc\user\user.c
0013ec   05fc     DECF      0xfc,0x0,0x1                                                                                    
0013ee   e103     BNZ       0x13f6                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
0013f0   808c     BSF       0x8c,0x0,0x0               mLED_Both_On();                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
0013f2   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
0013f4   d024     BRA       0x143e                 else if(usb_device_state == POWERED_STATE)                               C:\MCHPFSUSB\fw\Cdc\user\user.c
0013f6   0e02     MOVLW     0x2                                                                                             
0013f8   5dfc     SUBWF     0xfc,0x0,0x1                                                                                    
0013fa   e103     BNZ       0x1402                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
0013fc   808c     BSF       0x8c,0x0,0x0               mLED_Only_1_On();                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
0013fe   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001400   d01e     BRA       0x143e                 else if(usb_device_state == DEFAULT_STATE)                               C:\MCHPFSUSB\fw\Cdc\user\user.c
001402   0e03     MOVLW     0x3                                                                                             
001404   5dfc     SUBWF     0xfc,0x0,0x1                                                                                    
001406   e103     BNZ       0x140e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001408   908c     BCF       0x8c,0x0,0x0               mLED_Only_2_On();                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
00140a   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
00140c   d018     BRA       0x143e                 else if(usb_device_state == ADDRESS_STATE)                               C:\MCHPFSUSB\fw\Cdc\user\user.c
00140e   0e05     MOVLW     0x5                                                                                             
001410   5dfc     SUBWF     0xfc,0x0,0x1                                                                                    
001412   e107     BNZ       0x1422                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001414   0101     MOVLB     0x1                        if(led_count == 0)                                                   C:\MCHPFSUSB\fw\Cdc\user\user.c
001416   5123     MOVF      0x23,0x0,0x1                                                                                    
001418   1124     IORWF     0x24,0x0,0x1                                                                                    
00141a   e102     BNZ       0x1420                                                                                          
                                                       {                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
00141c   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\MCHPFSUSB\fw\Cdc\user\user.c
00141e   928c     BCF       0x8c,0x1,0x0                   mLED_2_Off();                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                       }//end if                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001420   d00e     BRA       0x143e                 else if(usb_device_state == CONFIGURED_STATE)                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001422   0e06     MOVLW     0x6                                                                                             
001424   5dfc     SUBWF     0xfc,0x0,0x1                                                                                    
001426   e10b     BNZ       0x143e                                                                                          
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001428   0101     MOVLB     0x1                        if(led_count==0)                                                     C:\MCHPFSUSB\fw\Cdc\user\user.c
00142a   5123     MOVF      0x23,0x0,0x1                                                                                    
00142c   1124     IORWF     0x24,0x0,0x1                                                                                    
00142e   e107     BNZ       0x143e                                                                                          
                                                       {                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
001430   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\MCHPFSUSB\fw\Cdc\user\user.c
001432   508c     MOVF      0x8c,0x0,0x0                   mLED_2 = !mLED_1;       // Alternate blink                       C:\MCHPFSUSB\fw\Cdc\user\user.c
001434   0b01     ANDLW     0x1                                                                                             
001436   e002     BZ        0x143c                                                                                          
001438   928c     BCF       0x8c,0x1,0x0                                                                                    
00143a   d001     BRA       0x143e                                                                                          
00143c   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                       }//end if                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                   }//end if(...)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                               }//end if(UCONbits.SUSPND...)                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00143e   0012     RETURN    0x0            }//end BlinkUSBStatus                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           BOOL Switch2IsPressed(void)                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
001440   5081     MOVF      0x81,0x0,0x0       if(sw2 != old_sw2)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
001442   0b10     ANDLW     0x10                                                                                            
001444   e001     BZ        0x1448                                                                                          
001446   0e01     MOVLW     0x1                                                                                             
001448   0100     MOVLB     0x0                                                                                             
00144a   5d60     SUBWF     0x60,0x0,0x1                                                                                    
00144c   e009     BZ        0x1460                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00144e   5081     MOVF      0x81,0x0,0x0           old_sw2 = sw2;                  // Save new value                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001450   0b10     ANDLW     0x10                                                                                            
001452   e001     BZ        0x1456                                                                                          
001454   0e01     MOVLW     0x1                                                                                             
001456   6f60     MOVWF     0x60,0x1                                                                                        
001458   b881     BTFSC     0x81,0x4,0x0           if(sw2 == 0)                    // If pressed                            C:\MCHPFSUSB\fw\Cdc\user\user.c
00145a   d002     BRA       0x1460                                                                                          
00145c   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\MCHPFSUSB\fw\Cdc\user\user.c
00145e   d002     BRA       0x1464                                                                                          
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
001460   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\MCHPFSUSB\fw\Cdc\user\user.c
001462   d000     BRA       0x1464                                                                                          
001464   0012     RETURN    0x0            }//end Switch2IsPressed                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #if defined(PIC18F4550_PICDEM_FS_USB)                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           BOOL Switch3IsPressed(void)                                                      C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\user.c
001466   5081     MOVF      0x81,0x0,0x0       if(sw3 != old_sw3)                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
001468   0b20     ANDLW     0x20                                                                                            
00146a   e001     BZ        0x146e                                                                                          
00146c   0e01     MOVLW     0x1                                                                                             
00146e   0100     MOVLB     0x0                                                                                             
001470   5d61     SUBWF     0x61,0x0,0x1                                                                                    
001472   e009     BZ        0x1486                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001474   5081     MOVF      0x81,0x0,0x0           old_sw3 = sw3;                  // Save new value                        C:\MCHPFSUSB\fw\Cdc\user\user.c
001476   0b20     ANDLW     0x20                                                                                            
001478   e001     BZ        0x147c                                                                                          
00147a   0e01     MOVLW     0x1                                                                                             
00147c   6f61     MOVWF     0x61,0x1                                                                                        
00147e   ba81     BTFSC     0x81,0x5,0x0           if(sw3 == 0)                    // If pressed                            C:\MCHPFSUSB\fw\Cdc\user\user.c
001480   d002     BRA       0x1486                                                                                          
001482   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\MCHPFSUSB\fw\Cdc\user\user.c
001484   d002     BRA       0x148a                                                                                          
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\user\user.c
001486   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\MCHPFSUSB\fw\Cdc\user\user.c
001488   d000     BRA       0x148a                                                                                          
00148a   0012     RETURN    0x0            }//end Switch3IsPressed                                                          C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\user\user.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /** EOF user.c ***************************************************************/  C:\MCHPFSUSB\fw\Cdc\user\user.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *             Microchip USB C18 Firmware -  CDC Version 1.0                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * FileName:        cdc.c                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Compiler:        C18 2.30.01+                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Rawin Rojvanit       11/19/04    Original. RS-232 Emulation Subset            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #include "system\usb\usb.h"                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #ifdef USB_USE_CDC                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_rx_len;            // total rx length                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_trf_state;         // States are defined cdc.h                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           POINTER pCDCSrc;            // Dedicated source pointer                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           POINTER pCDCDst;            // Dedicated destination pointer                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_tx_len;            // total tx length                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte cdc_mem_type;          // _ROM, _RAM                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           LINE_CODING line_coding;    // Buffer to store line coding information           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           CONTROL_SIGNAL_BITMAP control_signal_bitmap;                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /*                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * SEND_ENCAPSULATED_COMMAND and GET_ENCAPSULATED_RESPONSE are required          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * requests according to the CDC specification.                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * However, it is not really being used here, therefore a dummy buffer is        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * used for conformance.                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            */                                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #define dummy_length    0x08                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           byte dummy_encapsulated_cmd_response[dummy_length];                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** C L A S S  S P E C I F I C  R E Q ****************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void USBCheckCDCRequest(void)                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  knows how to handle it                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           void USBCheckCDCRequest(void)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If request recipient is not an interface then return                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000bde   0104     MOVLB     0x4                if(SetupPkt.Recipient != RCPT_INTF) return;                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000be0   5120     MOVF      0x20,0x0,0x1                                                                                    
000be2   0b1f     ANDLW     0x1f                                                                                            
000be4   0801     SUBLW     0x1                                                                                             
000be6   e001     BZ        0xbea                                                                                           
000be8   d05b     BRA       0xca0                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If request type is not class-specific then return                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000bea   5120     MOVF      0x20,0x0,0x1       if(SetupPkt.RequestType != CLASS) return;                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000bec   0b60     ANDLW     0x60                                                                                            
000bee   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bf0   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bf2   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bf4   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bf6   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000bf8   0801     SUBLW     0x1                                                                                             
000bfa   e001     BZ        0xbfe                                                                                           
000bfc   d051     BRA       0xca0                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Interface ID must match interface numbers associated with                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * CDC class, else return                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000bfe   5124     MOVF      0x24,0x0,0x1       if((SetupPkt.bIntfID != CDC_COMM_INTF_ID)&&                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c00   e003     BZ        0xc08                 (SetupPkt.bIntfID != CDC_DATA_INTF_ID)) return;                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c02   0524     DECF      0x24,0x0,0x1                                                                                    
000c04   e001     BZ        0xc08                                                                                           
000c06   d04c     BRA       0xca0                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c08   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c0a   0a23     XORLW     0x23                                                                                            
000c0c   e048     BZ        0xc9e                                                                                           
000c0e   0a01     XORLW     0x1                                                                                             
000c10   e040     BZ        0xc92                                                                                           
000c12   0a03     XORLW     0x3                                                                                             
000c14   e030     BZ        0xc76                                                                                           
000c16   0a01     XORLW     0x1                                                                                             
000c18   e025     BZ        0xc64                                                                                           
000c1a   0a24     XORLW     0x24                                                                                            
000c1c   e022     BZ        0xc62                                                                                           
000c1e   0a07     XORLW     0x7                                                                                             
000c20   e01f     BZ        0xc60                                                                                           
000c22   0a01     XORLW     0x1                                                                                             
000c24   e01c     BZ        0xc5e                                                                                           
000c26   0a03     XORLW     0x3                                                                                             
000c28   e011     BZ        0xc4c                                                                                           
000c2a   0a01     XORLW     0x1                                                                                             
000c2c   e001     BZ        0xc30                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SEND_ENCAPSULATED_COMMAND:                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c30   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c32   0e03     MOVLW     0x3                                                                                             
000c34   6f17     MOVWF     0x17,0x1                                                                                        
000c36   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&dummy_encapsulated_cmd_response;                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c38   0ef4     MOVLW     0xf4                                                                                            
000c3a   6f18     MOVWF     0x18,0x1                                                                                        
000c3c   0e00     MOVLW     0x0                                                                                             
000c3e   6f19     MOVWF     0x19,0x1                                                                                        
000c40   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c42   93fd     BCF       0xfd,0x1,0x1                                                                                    
000c44   0101     MOVLB     0x1                        LSB(wCount) = dummy_length;                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c46   0e08     MOVLW     0x8                                                                                             
000c48   6f1c     MOVWF     0x1c,0x1                                                                                        
000c4a   d02a     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case GET_ENCAPSULATED_RESPONSE:                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c4c   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c4e   0e03     MOVLW     0x3                                                                                             
000c50   6f17     MOVWF     0x17,0x1                                                                                        
                                                       // Populate dummy_encapsulated_cmd_response first.                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c52   0101     MOVLB     0x1                        pDst.bRam = (byte*)&dummy_encapsulated_cmd_response;                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c54   0ef4     MOVLW     0xf4                                                                                            
000c56   6f1a     MOVWF     0x1a,0x1                                                                                        
000c58   0e00     MOVLW     0x0                                                                                             
000c5a   6f1b     MOVWF     0x1b,0x1                                                                                        
000c5c   d021     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SET_COMM_FEATURE:                  // Optional                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c5e   d020     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case GET_COMM_FEATURE:                  // Optional                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c60   d01f     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case CLEAR_COMM_FEATURE:                // Optional                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c62   d01e     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SET_LINE_CODING:                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c64   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c66   0e03     MOVLW     0x3                                                                                             
000c68   6f17     MOVWF     0x17,0x1                                                                                        
000c6a   0101     MOVLB     0x1                        pDst.bRam = (byte*)&line_coding;    // Set destination               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c6c   0eec     MOVLW     0xec                                                                                            
000c6e   6f1a     MOVWF     0x1a,0x1                                                                                        
000c70   0e00     MOVLW     0x0                                                                                             
000c72   6f1b     MOVWF     0x1b,0x1                                                                                        
000c74   d015     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case GET_LINE_CODING:                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c76   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c78   0e03     MOVLW     0x3                                                                                             
000c7a   6f17     MOVWF     0x17,0x1                                                                                        
000c7c   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&line_coding;    // Set source                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c7e   0eec     MOVLW     0xec                                                                                            
000c80   6f18     MOVWF     0x18,0x1                                                                                        
000c82   0e00     MOVLW     0x0                                                                                             
000c84   6f19     MOVWF     0x19,0x1                                                                                        
000c86   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;       // Set memory type               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c88   93fd     BCF       0xfd,0x1,0x1                                                                                    
000c8a   0101     MOVLB     0x1                        LSB(wCount) = LINE_CODING_LENGTH;   // Set data count                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c8c   0e07     MOVLW     0x7                                                                                             
000c8e   6f1c     MOVWF     0x1c,0x1                                                                                        
000c90   d007     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SET_CONTROL_LINE_STATE:                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c92   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_CDC;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c94   0e03     MOVLW     0x3                                                                                             
000c96   6f17     MOVWF     0x17,0x1                                                                                        
000c98   c422     MOVFF     0x422,0xf3                 control_signal_bitmap._byte = LSB(SetupPkt.W_Value);                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c9a   f0f3                                                                                                               
000c9c   d001     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   case SEND_BREAK:                        // Optional                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c9e   d000     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   default:                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000c2e   d038     BRA       0xca0                      break;                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               }//end switch(SetupPkt.bRequest)                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ca0   0012     RETURN    0x0            }//end USBCheckCDCRequest                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** U S E R  A P I ***********************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCInitEP(void)                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCInitEP initializes CDC endpoints, buffer descriptors,     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  internal state-machine, and variables.                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  It should be called after the USB host has sent out a        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  SET_CONFIGURATION request.                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           void CDCInitEP(void)                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               //Abstract line coding information                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ca2   0100     MOVLB     0x0                line_coding.dwDTERate._dword = 115200;      // baud rate                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ca4   6bec     CLRF      0xec,0x1                                                                                        
000ca6   0ec2     MOVLW     0xc2                                                                                            
000ca8   6fed     MOVWF     0xed,0x1                                                                                        
000caa   0e01     MOVLW     0x1                                                                                             
000cac   6fee     MOVWF     0xee,0x1                                                                                        
000cae   6bef     CLRF      0xef,0x1                                                                                        
000cb0   6bf0     CLRF      0xf0,0x1           line_coding.bCharFormat = 0x00;             // 1 stop bit                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cb2   6bf1     CLRF      0xf1,0x1           line_coding.bParityType = 0x00;             // None                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cb4   0e08     MOVLW     0x8                line_coding.bDataBits = 0x08;               // 5,6,7,8, or 16                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cb6   6ff2     MOVWF     0xf2,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cb8   6be5     CLRF      0xe5,0x1           cdc_trf_state = CDC_TX_READY;                                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cba   6be4     CLRF      0xe4,0x1           cdc_rx_len = 0;                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cbc   0e1a     MOVLW     0x1a               CDC_COMM_UEP = EP_IN|HSHK_EN;               // Enable 1 Comm pipe            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cbe   6e72     MOVWF     0x72,0x0                                                                                        
000cc0   0e1e     MOVLW     0x1e               CDC_DATA_UEP = EP_OUT_IN|HSHK_EN;           // Enable 2 data pipes           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cc2   6e73     MOVWF     0x73,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Do not have to init Cnt of IN pipes here.                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Reason:  Number of bytes to send to the host                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          varies from one transaction to                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          another. Cnt should equal the exact                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          number of bytes to transmit for                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          a given IN transaction.                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          This number of bytes will only                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          be known right before the data is                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *          sent.                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cc4   0104     MOVLB     0x4                CDC_INT_BD_IN.ADR = (byte*)&cdc_notice;     // Set buffer address            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cc6   0e00     MOVLW     0x0                                                                                             
000cc8   6f16     MOVWF     0x16,0x1                                                                                        
000cca   0e05     MOVLW     0x5                                                                                             
000ccc   6f17     MOVWF     0x17,0x1                                                                                        
000cce   0e40     MOVLW     0x40               CDC_INT_BD_IN.Stat._byte = _UCPU|_DAT1;     // Set status                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cd0   6f14     MOVWF     0x14,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cd2   0104     MOVLB     0x4                CDC_BULK_BD_OUT.Cnt = sizeof(cdc_data_rx);  // Set buffer size               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cd4   6f19     MOVWF     0x19,0x1                                                                                        
000cd6   0e08     MOVLW     0x8                CDC_BULK_BD_OUT.ADR = (byte*)&cdc_data_rx;  // Set buffer address            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cd8   6f1a     MOVWF     0x1a,0x1                                                                                        
000cda   0e05     MOVLW     0x5                                                                                             
000cdc   6f1b     MOVWF     0x1b,0x1                                                                                        
000cde   0e88     MOVLW     0x88               CDC_BULK_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ce0   6f18     MOVWF     0x18,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ce2   0104     MOVLB     0x4                CDC_BULK_BD_IN.ADR = (byte*)&cdc_data_tx;   // Set buffer size               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ce4   0e48     MOVLW     0x48                                                                                            
000ce6   6f1e     MOVWF     0x1e,0x1                                                                                        
000ce8   0e05     MOVLW     0x5                                                                                             
000cea   6f1f     MOVWF     0x1f,0x1                                                                                        
000cec   0e40     MOVLW     0x40               CDC_BULK_BD_IN.Stat._byte = _UCPU|_DAT1;    // Set buffer address            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cee   6f1c     MOVWF     0x1c,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cf0   0012     RETURN    0x0            }//end CDCInitEP                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        byte getsUSBUSART(char *buffer,                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                    byte len)                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  maximum endpoint size responsible for receiving bulk         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  data from USB host for CDC class.                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  Input argument 'buffer' should point to a buffer area that   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  is bigger or equal to the size specified by 'len'.           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  len     : The number of bytes expected.                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          The number of bytes copied to buffer.                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    Publicly accessible variable cdc_rx_len is updated with      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  the number of bytes copied to buffer.                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  Once getsUSBUSART is called, subsequent retrieval of         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  cdc_rx_len can be done by calling macro mCDCGetRxLength().   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        getsUSBUSART copies a string of bytes received through       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  USB CDC Bulk OUT endpoint to a user's specified location.    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  It is a non-blocking function. It does not wait              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  for data if there is no data available. Instead it returns   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  '0' to notify the caller that there is no data available.    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            If the actual number of bytes received is larger than the    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the expected number     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  of bytes specified will be copied to buffer.                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  If the actual number of bytes received is smaller than the   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  number of bytes expected (len), only the actual number       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  of bytes received will be copied to buffer.                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cf2   cfd9     MOVFF     0xfd9,0xfe6    byte getsUSBUSART(char *buffer, byte len)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cf4   ffe6                                                                                                               
000cf6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000cf8   ffd9                                                                                                               
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cfa   0100     MOVLB     0x0                cdc_rx_len = 0;                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cfc   6be4     CLRF      0xe4,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000cfe   0104     MOVLB     0x4                if(!mCDCUsartRxIsBusy())                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d00   bf18     BTFSC     0x18,0x7,0x1                                                                                    
000d02   d030     BRA       0xd64                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Adjust the expected number of bytes to equal                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * the actual number of bytes received.                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d04   0efc     MOVLW     0xfc                   if(len > CDC_BULK_BD_OUT.Cnt)                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d06   cfdb     MOVFF     0xfdb,0x10                                                                                      
000d08   f010                                                                                                               
000d0a   5119     MOVF      0x19,0x0,0x1                                                                                    
000d0c   80d8     BSF       0xd8,0x0,0x0                                                                                    
000d0e   5410     SUBFWB    0x10,0x0,0x0                                                                                    
000d10   e203     BC        0xd18                                                                                           
000d12   0efc     MOVLW     0xfc                       len = CDC_BULK_BD_OUT.Cnt;                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d14   c419     MOVFF     0x419,0xfdb                                                                                     
000d16   ffdb                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Copy data from dual-ram buffer to user's buffer                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d18   0100     MOVLB     0x0                    for(cdc_rx_len = 0; cdc_rx_len < len; cdc_rx_len++)                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d1a   6be4     CLRF      0xe4,0x1                                                                                        
000d1c   0efc     MOVLW     0xfc                                                                                            
000d1e   50db     MOVF      0xdb,0x0,0x0                                                                                    
000d20   5de4     SUBWF     0xe4,0x0,0x1                                                                                    
000d22   e219     BC        0xd56                                                                                           
000d52   2be4     INCF      0xe4,0x1,0x1                                                                                    
000d54   d7e3     BRA       0xd1c                                                                                           
000d24   51e4     MOVF      0xe4,0x0,0x1               buffer[cdc_rx_len] = cdc_data_rx[cdc_rx_len];                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d26   6aea     CLRF      0xea,0x0                                                                                        
000d28   0f08     ADDLW     0x8                                                                                             
000d2a   6ee9     MOVWF     0xe9,0x0                                                                                        
000d2c   0e05     MOVLW     0x5                                                                                             
000d2e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000d30   50ef     MOVF      0xef,0x0,0x0                                                                                    
000d32   6ee6     MOVWF     0xe6,0x0                                                                                        
000d34   51e4     MOVF      0xe4,0x0,0x1                                                                                    
000d36   6ee7     MOVWF     0xe7,0x0                                                                                        
000d38   0efd     MOVLW     0xfd                                                                                            
000d3a   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000d3c   ffe9                                                                                                               
000d3e   0efe     MOVLW     0xfe                                                                                            
000d40   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000d42   ffea                                                                                                               
000d44   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000d46   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
000d48   0e00     MOVLW     0x0                                                                                             
000d4a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000d4c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d4e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000d50   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d56   0104     MOVLB     0x4                    CDC_BULK_BD_OUT.Cnt = sizeof(cdc_data_rx);                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d58   0e40     MOVLW     0x40                                                                                            
000d5a   6f19     MOVWF     0x19,0x1                                                                                        
000d5c   1718     ANDWF     0x18,0x1,0x1           mUSBBufferReady(CDC_BULK_BD_OUT);                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d5e   7d18     BTG       0x18,0x6,0x1                                                                                    
000d60   0e88     MOVLW     0x88                                                                                            
000d62   1318     IORWF     0x18,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d64   0100     MOVLB     0x0                return cdc_rx_len;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d66   51e4     MOVF      0xe4,0x0,0x1                                                                                    
000d68   d000     BRA       0xd6a                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d6a   52e5     MOVF      0xe5,0x1,0x0   }//end getsUSBUSART                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d6c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000d6e   ffd9                                                                                                               
000d70   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void putsUSBUSART(char *data)                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        putsUSBUSART writes a string of data to the USB including    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'puts', to transfer    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  data located in data memory.                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d72   cfd9     MOVFF     0xfd9,0xfe6    void putsUSBUSART(char *data)                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d74   ffe6                                                                                                               
000d76   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000d78   ffd9                                                                                                               
000d7a   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()==1           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * while(!mUSBUSARTIsTxTrfReady())                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d7c   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d7e   51e5     MOVF      0xe5,0x0,0x1                                                                                    
000d80   e001     BZ        0xd84                                                                                           
000d82   d02f     BRA       0xde2                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * null character.                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d84   6adf     CLRF      0xdf,0x0           len = 0;                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               do                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d86   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d88   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d8a   6e10     MOVWF     0x10,0x0                                                                                        
000d8c   6a11     CLRF      0x11,0x0                                                                                        
000d8e   0eff     MOVLW     0xff                                                                                            
000d90   1810     XORWF     0x10,0x0,0x0                                                                                    
000d92   e101     BNZ       0xd96                                                                                           
000d94   5011     MOVF      0x11,0x0,0x0                                                                                    
000d96   e101     BNZ       0xd9a                                                                                           
000d98   d00b     BRA       0xdb0                                                                                           
000d9a   0efd     MOVLW     0xfd               }while(*data++);                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000d9c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000d9e   ffe9                                                                                                               
000da0   2adb     INCF      0xdb,0x1,0x0                                                                                    
000da2   0efe     MOVLW     0xfe                                                                                            
000da4   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000da6   ffea                                                                                                               
000da8   e301     BNC       0xdac                                                                                           
000daa   2adb     INCF      0xdb,0x1,0x0                                                                                    
000dac   50ef     MOVF      0xef,0x0,0x0                                                                                    
000dae   e1eb     BNZ       0xd86                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000db0   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000db2   6e10     MOVWF     0x10,0x0                                                                                        
000db4   6a11     CLRF      0x11,0x0                                                                                        
000db6   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000db8   0ffd     ADDLW     0xfd                                                                                            
000dba   6ee9     MOVWF     0xe9,0x0                                                                                        
000dbc   0eff     MOVLW     0xff                                                                                            
000dbe   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000dc0   6eea     MOVWF     0xea,0x0                                                                                        
000dc2   5010     MOVF      0x10,0x0,0x0                                                                                    
000dc4   5eee     SUBWF     0xee,0x1,0x0                                                                                    
000dc6   5011     MOVF      0x11,0x0,0x0                                                                                    
000dc8   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRam to setup the transfer.                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000dca   0efd     MOVLW     0xfd               mUSBUSARTTxRam((byte*)data,len);     // See cdc.h                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000dcc   cfdb     MOVFF     0xfdb,0xe6                                                                                      
000dce   f0e6                                                                                                               
000dd0   0efe     MOVLW     0xfe                                                                                            
000dd2   cfdb     MOVFF     0xfdb,0xe7                                                                                      
000dd4   f0e7                                                                                                               
000dd6   cfdf     MOVFF     0xfdf,0xea                                                                                      
000dd8   f0ea                                                                                                               
000dda   0100     MOVLB     0x0                                                                                             
000ddc   6beb     CLRF      0xeb,0x1                                                                                        
000dde   0e01     MOVLW     0x1                                                                                             
000de0   6fe5     MOVWF     0xe5,0x1                                                                                        
000de2   52e5     MOVF      0xe5,0x1,0x0   }//end putsUSBUSART                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000de4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000de6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000de8   ffd9                                                                                                               
000dea   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void putrsUSBUSART(const rom char *data)                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    cdc_trf_state must be in the CDC_TX_READY state.             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  The string of characters pointed to by 'data' must equal     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  to or smaller than 255 bytes.                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           data    : Pointer to a null-terminated string of data.       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            If a null character is not found, 255 bytes        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                            of data will be transferred to the host.           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        putrsUSBUSART writes a string of data to the USB including   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  the null character. Use this version, 'putrs', to transfer   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  data literals and data located in program memory.            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            The transfer mechanism for device-to-host(put) is more       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  flexible than host-to-device(get). It can handle             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  a string of data larger than the maximum size of bulk IN     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  endpoint. A state machine is used to transfer a long         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  string of data over multiple USB transactions.               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  See CDCTxService() for more details.                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000dec   cfd9     MOVFF     0xfd9,0xfe6    void putrsUSBUSART(const rom char *data)                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000dee   ffe6                                                                                                               
000df0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000df2   ffd9                                                                                                               
000df4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               byte len;                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * User should have checked that cdc_trf_state is in CDC_TX_READY state      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * before calling this function.                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * As a safety precaution, this fuction checks the state one more time       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to make sure it does not override any pending transactions.               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Currently it just quits the routine without reporting any errors back     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * to the user.                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Bottomline: User MUST make sure that mUSBUSARTIsTxTrfReady()              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *             before calling this function!                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Example:                                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * if(mUSBUSARTIsTxTrfReady())                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * IMPORTANT: Never use the following blocking while loop to wait:           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * while(cdc_trf_state != CDC_TX_READY)                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *     putsUSBUSART(pData);                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                *                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The whole firmware framework is written based on cooperative              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * multi-tasking and a blocking code is not acceptable.                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Use a state machine instead.                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000df6   0100     MOVLB     0x0                if(cdc_trf_state != CDC_TX_READY) return;                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000df8   51e5     MOVF      0xe5,0x0,0x1                                                                                    
000dfa   e001     BZ        0xdfe                                                                                           
000dfc   d030     BRA       0xe5e                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * While loop counts the number of bytes to send including the               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * null character.                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000dfe   6adf     CLRF      0xdf,0x0           len = 0;                                                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               do                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e00   2adf     INCF      0xdf,0x1,0x0           len++;                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e02   50df     MOVF      0xdf,0x0,0x0           if(len == 255) break;       // Break loop once max len is reached.       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e04   6e10     MOVWF     0x10,0x0                                                                                        
000e06   6a11     CLRF      0x11,0x0                                                                                        
000e08   0eff     MOVLW     0xff                                                                                            
000e0a   1810     XORWF     0x10,0x0,0x0                                                                                    
000e0c   e101     BNZ       0xe10                                                                                           
000e0e   5011     MOVF      0x11,0x0,0x0                                                                                    
000e10   e101     BNZ       0xe14                                                                                           
000e12   d00c     BRA       0xe2c                                                                                           
000e14   0efd     MOVLW     0xfd               }while(*data++);                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e16   cfdb     MOVFF     0xfdb,0xff6                                                                                     
000e18   fff6                                                                                                               
000e1a   2adb     INCF      0xdb,0x1,0x0                                                                                    
000e1c   0efe     MOVLW     0xfe                                                                                            
000e1e   cfdb     MOVFF     0xfdb,0xff7                                                                                     
000e20   fff7                                                                                                               
000e22   e301     BNC       0xe26                                                                                           
000e24   2adb     INCF      0xdb,0x1,0x0                                                                                    
000e26   0008     TBLRD                                                                                                     
000e28   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000e2a   e1ea     BNZ       0xe00                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Re-adjust pointer to its initial location                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e2c   50df     MOVF      0xdf,0x0,0x0       data-=len;                                                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e2e   6e10     MOVWF     0x10,0x0                                                                                        
000e30   6a11     CLRF      0x11,0x0                                                                                        
000e32   50d9     MOVF      0xd9,0x0,0x0                                                                                    
000e34   0ffd     ADDLW     0xfd                                                                                            
000e36   6ee9     MOVWF     0xe9,0x0                                                                                        
000e38   0eff     MOVLW     0xff                                                                                            
000e3a   20da     ADDWFC    0xda,0x0,0x0                                                                                    
000e3c   6eea     MOVWF     0xea,0x0                                                                                        
000e3e   5010     MOVF      0x10,0x0,0x0                                                                                    
000e40   5eee     SUBWF     0xee,0x1,0x0                                                                                    
000e42   5011     MOVF      0x11,0x0,0x0                                                                                    
000e44   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Second piece of information (length of data to send) is ready.            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Call mUSBUSARTTxRom to setup the transfer.                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * The actual transfer process will be handled by CDCTxService(),            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * which should be called once per Main Program loop.                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e46   0efd     MOVLW     0xfd               mUSBUSARTTxRom((rom byte*)data,len); // See cdc.h                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e48   cfdb     MOVFF     0xfdb,0xe6                                                                                      
000e4a   f0e6                                                                                                               
000e4c   0efe     MOVLW     0xfe                                                                                            
000e4e   cfdb     MOVFF     0xfdb,0xe7                                                                                      
000e50   f0e7                                                                                                               
000e52   cfdf     MOVFF     0xfdf,0xea                                                                                      
000e54   f0ea                                                                                                               
000e56   0100     MOVLB     0x0                                                                                             
000e58   0e01     MOVLW     0x1                                                                                             
000e5a   6feb     MOVWF     0xeb,0x1                                                                                        
000e5c   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e5e   52e5     MOVF      0xe5,0x1,0x0   }//end putrsUSBUSART                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e60   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e62   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000e64   ffd9                                                                                                               
000e66   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Function:        void CDCTxService(void)                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Overview:        CDCTxService handles device-to-host transaction(s).          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                  This function should be called once per Main Program loop.   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e68   cfd9     MOVFF     0xfd9,0xfe6    void CDCTxService(void)                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e6a   ffe6                                                                                                               
000e6c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000e6e   ffd9                                                                                                               
000e70   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               byte byte_to_send;                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e72   0104     MOVLB     0x4                if(mCDCUsartTxIsBusy()) return;                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e74   bf1c     BTFSC     0x1c,0x7,0x1                                                                                    
000e76   d06b     BRA       0xf4e                                                                                           
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Completing stage is necessary while [ mCDCUSartTxIsBusy()==1 ].           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * By having this stage, user can always check cdc_trf_state,                C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * and not having to call mCDCUsartTxIsBusy() directly.                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e78   0e03     MOVLW     0x3                if(cdc_trf_state == CDC_TX_COMPLETING)                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e7a   0100     MOVLB     0x0                                                                                             
000e7c   5de5     SUBWF     0xe5,0x0,0x1                                                                                    
000e7e   e101     BNZ       0xe82                                                                                           
000e80   6be5     CLRF      0xe5,0x1               cdc_trf_state = CDC_TX_READY;                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_READY state, nothing to do, just return.                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e82   51e5     MOVF      0xe5,0x0,0x1       if(cdc_trf_state == CDC_TX_READY) return;                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e84   e101     BNZ       0xe88                                                                                           
000e86   d063     BRA       0xf4e                                                                                           
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * If CDC_TX_BUSY_ZLP state, send zero length packet                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e88   0e02     MOVLW     0x2                if(cdc_trf_state == CDC_TX_BUSY_ZLP)                                         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e8a   5de5     SUBWF     0xe5,0x0,0x1                                                                                    
000e8c   e106     BNZ       0xe9a                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e8e   0104     MOVLB     0x4                    CDC_BULK_BD_IN.Cnt = 0;                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e90   6b1d     CLRF      0x1d,0x1                                                                                        
000e92   0100     MOVLB     0x0                    cdc_trf_state = CDC_TX_COMPLETING;                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e94   0e03     MOVLW     0x3                                                                                             
000e96   6fe5     MOVWF     0xe5,0x1                                                                                        
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e98   d054     BRA       0xf42              else if(cdc_trf_state == CDC_TX_BUSY)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e9a   05e5     DECF      0xe5,0x0,0x1                                                                                    
000e9c   e152     BNZ       0xf42                                                                                           
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * First, have to figure out how many byte of data to send.              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000e9e   0e40     MOVLW     0x40               	if(cdc_tx_len > sizeof(cdc_data_tx))                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ea0   6e10     MOVWF     0x10,0x0                                                                                        
000ea2   6a11     CLRF      0x11,0x0                                                                                        
000ea4   51ea     MOVF      0xea,0x0,0x1                                                                                    
000ea6   5c10     SUBWF     0x10,0x0,0x0                                                                                    
000ea8   0e00     MOVLW     0x0                                                                                             
000eaa   5811     SUBWFB    0x11,0x0,0x0                                                                                    
000eac   e203     BC        0xeb4                                                                                           
000eae   0e40     MOVLW     0x40               	    byte_to_send = sizeof(cdc_data_tx);                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000eb0   6edf     MOVWF     0xdf,0x0                                                                                        
000eb2   d002     BRA       0xeb8              	else                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000eb4   c0ea     MOVFF     0xea,0xfdf         	    byte_to_send = cdc_tx_len;                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000eb6   ffdf                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Next, load the number of bytes to send to Cnt in buffer descriptor    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000eb8   cfdf     MOVFF     0xfdf,0x41d            CDC_BULK_BD_IN.Cnt = byte_to_send;                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000eba   f41d                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Subtract the number of bytes just about to be sent from the total.    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ebc   50df     MOVF      0xdf,0x0,0x0       	cdc_tx_len = cdc_tx_len - byte_to_send;                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ebe   5dea     SUBWF     0xea,0x0,0x1                                                                                    
000ec0   6fea     MOVWF     0xea,0x1                                                                                        
                                               	                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ec2   0e48     MOVLW     0x48                   pCDCDst.bRam = (byte*)&cdc_data_tx; // Set destination pointer           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ec4   6fe8     MOVWF     0xe8,0x1                                                                                        
000ec6   0e05     MOVLW     0x5                                                                                             
000ec8   6fe9     MOVWF     0xe9,0x1                                                                                        
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000eca   05eb     DECF      0xeb,0x0,0x1           if(cdc_mem_type == _ROM)            // Determine type of memory source   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ecc   e115     BNZ       0xef8                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ece   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ed0   e012     BZ        0xef6                                                                                           
000ef4   d7ec     BRA       0xece                                                                                           
                                                       {                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ed2   c0e6     MOVFF     0xe6,0xff6                     *pCDCDst.bRam = *pCDCSrc.bRom;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ed4   fff6                                                                                                               
000ed6   c0e7     MOVFF     0xe7,0xff7                                                                                      
000ed8   fff7                                                                                                               
000eda   0008     TBLRD                                                                                                     
000edc   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000ede   c0e8     MOVFF     0xe8,0xfe9                                                                                      
000ee0   ffe9                                                                                                               
000ee2   c0e9     MOVFF     0xe9,0xfea                                                                                      
000ee4   ffea                                                                                                               
000ee6   6eef     MOVWF     0xef,0x0                                                                                        
000ee8   2be8     INCF      0xe8,0x1,0x1                   pCDCDst.bRam++;                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000eea   0e00     MOVLW     0x0                                                                                             
000eec   23e9     ADDWFC    0xe9,0x1,0x1                                                                                    
000eee   2be6     INCF      0xe6,0x1,0x1                   pCDCSrc.bRom++;                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ef0   23e7     ADDWFC    0xe7,0x1,0x1                                                                                    
000ef2   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send)                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   }                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ef6   d013     BRA       0xf1e                  else // _RAM                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000ef8   50df     MOVF      0xdf,0x0,0x0               while(byte_to_send)                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000efa   e011     BZ        0xf1e                                                                                           
000f1c   d7ed     BRA       0xef8                                                                                           
                                                       {                                                                    C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000efc   c0e6     MOVFF     0xe6,0xfe9                     *pCDCDst.bRam = *pCDCSrc.bRam;                                   C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000efe   ffe9                                                                                                               
000f00   c0e7     MOVFF     0xe7,0xfea                                                                                      
000f02   ffea                                                                                                               
000f04   50ef     MOVF      0xef,0x0,0x0                                                                                    
000f06   c0e8     MOVFF     0xe8,0xfe9                                                                                      
000f08   ffe9                                                                                                               
000f0a   c0e9     MOVFF     0xe9,0xfea                                                                                      
000f0c   ffea                                                                                                               
000f0e   6eef     MOVWF     0xef,0x0                                                                                        
000f10   2be8     INCF      0xe8,0x1,0x1                   pCDCDst.bRam++;                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f12   0e00     MOVLW     0x0                                                                                             
000f14   23e9     ADDWFC    0xe9,0x1,0x1                                                                                    
000f16   2be6     INCF      0xe6,0x1,0x1                   pCDCSrc.bRam++;                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f18   23e7     ADDWFC    0xe7,0x1,0x1                                                                                    
000f1a   06df     DECF      0xdf,0x1,0x0                   byte_to_send--;                                                  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                       }//end while(byte_to_send._word)                                     C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   }//end if(cdc_mem_type...)                                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                   /*                                                                       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * Lastly, determine if a zero length packet state is necessary.         C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    * See explanation in USB Specification 2.0: Section 5.8.3               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                    */                                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f1e   51ea     MOVF      0xea,0x0,0x1           if(cdc_tx_len == 0)                                                      C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f20   e110     BNZ       0xf42                                                                                           
                                                   {                                                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f22   0104     MOVLB     0x4                        if(CDC_BULK_BD_IN.Cnt == sizeof(cdc_data_tx))                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f24   511d     MOVF      0x1d,0x0,0x1                                                                                    
000f26   6e10     MOVWF     0x10,0x0                                                                                        
000f28   6a11     CLRF      0x11,0x0                                                                                        
000f2a   0e40     MOVLW     0x40                                                                                            
000f2c   1810     XORWF     0x10,0x0,0x0                                                                                    
000f2e   e101     BNZ       0xf32                                                                                           
000f30   5011     MOVF      0x11,0x0,0x0                                                                                    
000f32   e104     BNZ       0xf3c                                                                                           
000f34   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_BUSY_ZLP;                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f36   0e02     MOVLW     0x2                                                                                             
000f38   6fe5     MOVWF     0xe5,0x1                                                                                        
000f3a   d003     BRA       0xf42                      else                                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f3c   0100     MOVLB     0x0                            cdc_trf_state = CDC_TX_COMPLETING;                               C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f3e   0e03     MOVLW     0x3                                                                                             
000f40   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                   }//end if(cdc_tx_len...)                                                 C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               }//end if(cdc_tx_sate == CDC_TX_BUSY)                                        C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                               /*                                                                           C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                * Both CDC_TX_BUSY and CDC_TX_BUSY_ZLP states use the following macro       C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                */                                                                          C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f42   0e40     MOVLW     0x40               mUSBBufferReady(CDC_BULK_BD_IN);                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f44   0104     MOVLB     0x4                                                                                             
000f46   171c     ANDWF     0x1c,0x1,0x1                                                                                    
000f48   7d1c     BTG       0x1c,0x6,0x1                                                                                    
000f4a   0e88     MOVLW     0x88                                                                                            
000f4c   131c     IORWF     0x1c,0x1,0x1                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f4e   52e5     MOVF      0xe5,0x1,0x0   }//end CDCTxService                                                              C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
000f50   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000f52   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000f54   ffd9                                                                                                               
000f56   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           #endif //USB_USE_CDC                                                             C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /** EOF cdc.c ****************************************************************/  C:\MCHPFSUSB\fw\Cdc\system\usb\class\cdc\cdc.c
                                           /*********************************************************************           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                Thermo Sensor with SPI(TM) Interface                           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *********************************************************************           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * FileName:        temperature.c                                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Dependencies:    See INCLUDES section below                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Processor:       PIC18                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Compiler:        C18 3.11+                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Company:         Microchip Technology, Inc.                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Software License Agreement                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * civil liability for the breach of the terms and conditions of this            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * license.                                                                      C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Author               Date        Comment                                      C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Rawin Rojvanit       05/14/07    A few updates.                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            ********************************************************************/           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /** I N C L U D E S **********************************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #include <p18cxxx.h>                                                             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #include "system\typedefs.h"                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #include <spi.h>                                                                 C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #include "io_cfg.h"                                                              C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #include "user\temperature.h"                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /** V A R I A B L E S ********************************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #pragma udata                                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           WORD temperature;           // Raw data format                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           char tempString[10];        // Buffer for storing data in ASCII format           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #if defined(PIC18F4550_PICDEM_FS_USB)                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #pragma code                                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Function:        void InitTempSensor(void)                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Overview:        Initializes SPI interface & chip select line                 C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           void InitTempSensor(void)                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001646   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001648   9493     BCF       0x93,0x2,0x0       tris_cs_temp_sensor = OUTPUT_PIN;                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00164a   6ae6     CLRF      0xe6,0x0           OpenSPI(SPI_FOSC_64, MODE_11, SMPMID);                                       C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00164c   0e03     MOVLW     0x3                                                                                             
00164e   6ee6     MOVWF     0xe6,0x0                                                                                        
001650   0e02     MOVLW     0x2                                                                                             
001652   6ee6     MOVWF     0xe6,0x0                                                                                        
001654   eca8     CALL      0x1950,0x0                                                                                      
001656   f00c                                                                                                               
001658   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00165a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00165c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               // Initialize readable values - default to room temperature                  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00165e   0101     MOVLB     0x1                temperature._word = 0x0C87;       // 25 degree celsius                       C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001660   0e87     MOVLW     0x87                                                                                            
001662   6f00     MOVWF     0x0,0x1                                                                                         
001664   0e0c     MOVLW     0xc                                                                                             
001666   6f01     MOVWF     0x1,0x1                                                                                         
001668   ef47     GOTO      0x168e             UpdateCelsiusASCII();                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00166a   f00b                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           }//end InitTempSensor                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Function:        void AcquireTemperature(void)                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Overview:        None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           BOOL AcquireTemperature(void)                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00166c   948a     BCF       0x8a,0x2,0x0       cs_temp_sensor = 0;                                                          C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00166e   ec5b     CALL      0x1ab6,0x0         MSB(temperature) = ReadSPI();                                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001670   f00d                                                                                                               
001672   0101     MOVLB     0x1                                                                                             
001674   6f01     MOVWF     0x1,0x1                                                                                         
001676   ec5b     CALL      0x1ab6,0x0         LSB(temperature) = ReadSPI();                                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001678   f00d                                                                                                               
00167a   0101     MOVLB     0x1                                                                                             
00167c   6f00     MOVWF     0x0,0x1                                                                                         
00167e   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001680   b500     BTFSC     0x0,0x2,0x1        if(temperature.LowB.b2 == 0)                                                 C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001682   d002     BRA       0x1688                                                                                          
001684   0e00     MOVLW     0x0                    return FAIL;                                                             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001686   d002     BRA       0x168c                                                                                          
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001688   0e01     MOVLW     0x1                return OK;                                                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00168a   d000     BRA       0x168c                                                                                          
00168c   0012     RETURN    0x0            }//end AcquireTemperature                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /******************************************************************************  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Function:        void UpdateCelsiusASCII(void)                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * PreCondition:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Input:           None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Output:          None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Side Effects:    None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Overview:        This routine converts data output to ASCII string            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *                                                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            * Note:            None                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                            *****************************************************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00168e   cfd9     MOVFF     0xfd9,0xfe6    void UpdateCelsiusASCII(void)                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001690   ffe6                                                                                                               
001692   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001694   ffd9                                                                                                               
001696   0e03     MOVLW     0x3                                                                                             
001698   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               WORD temp;                                                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               byte i;                                                                      C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00169a   c100     MOVFF     0x100,0x10         temp._word = temperature._word >> 3;                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00169c   f010                                                                                                               
00169e   c101     MOVFF     0x101,0x11                                                                                      
0016a0   f011                                                                                                               
0016a2   90d8     BCF       0xd8,0x0,0x0                                                                                    
0016a4   3211     RRCF      0x11,0x1,0x0                                                                                    
0016a6   3210     RRCF      0x10,0x1,0x0                                                                                    
0016a8   04e8     DECF      0xe8,0x0,0x0                                                                                    
0016aa   e1fb     BNZ       0x16a2                                                                                          
0016ac   c010     MOVFF     0x10,0xfde                                                                                      
0016ae   ffde                                                                                                               
0016b0   c011     MOVFF     0x11,0xfdd                                                                                      
0016b2   ffdd                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016b4   50d9     MOVF      0xd9,0x0,0x0       if(temp.HighB.b4 == 0)                                                       C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016b6   0f01     ADDLW     0x1                                                                                             
0016b8   6ee9     MOVWF     0xe9,0x0                                                                                        
0016ba   cfda     MOVFF     0xfda,0xfea                                                                                     
0016bc   ffea                                                                                                               
0016be   50ef     MOVF      0xef,0x0,0x0                                                                                    
0016c0   0b10     ANDLW     0x10                                                                                            
0016c2   e108     BNZ       0x16d4                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016c4   0e01     MOVLW     0x1                    temp.HighB._byte &= 0b00011111;                                          C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016c6   9adb     BCF       0xdb,0x5,0x0                                                                                    
0016c8   9cdb     BCF       0xdb,0x6,0x0                                                                                    
0016ca   9edb     BCF       0xdb,0x7,0x0                                                                                    
0016cc   0101     MOVLB     0x1                    tempString[0] = '+';                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016ce   0e2b     MOVLW     0x2b                                                                                            
0016d0   6f02     MOVWF     0x2,0x1                                                                                         
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016d2   d016     BRA       0x1700             else                                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016d4   0e01     MOVLW     0x1                    temp.HighB._byte |= 0b11100000;                                          C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016d6   8adb     BSF       0xdb,0x5,0x0                                                                                    
0016d8   8cdb     BSF       0xdb,0x6,0x0                                                                                    
0016da   8edb     BSF       0xdb,0x7,0x0                                                                                    
0016dc   0101     MOVLB     0x1                    tempString[0] = '-';                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016de   0e2d     MOVLW     0x2d                                                                                            
0016e0   6f02     MOVWF     0x2,0x1                                                                                         
0016e2   cfde     MOVFF     0xfde,0x10             temp._word = temp._word ^ 0xFFFF;   // Negate                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016e4   f010                                                                                                               
0016e6   cfdd     MOVFF     0xfdd,0x11                                                                                      
0016e8   f011                                                                                                               
0016ea   0eff     MOVLW     0xff                                                                                            
0016ec   1a10     XORWF     0x10,0x1,0x0                                                                                    
0016ee   1a11     XORWF     0x11,0x1,0x0                                                                                    
0016f0   c010     MOVFF     0x10,0xfde                                                                                      
0016f2   ffde                                                                                                               
0016f4   c011     MOVFF     0x11,0xfdd                                                                                      
0016f6   ffdd                                                                                                               
0016f8   2adf     INCF      0xdf,0x1,0x0           temp._word++;                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0016fa   0e01     MOVLW     0x1                                                                                             
0016fc   e301     BNC       0x1700                                                                                          
0016fe   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001700   cfde     MOVFF     0xfde,0x10         temp._word = (temp._word*10U) >> 4;     // Turn into celsius xx.x            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001702   f010                                                                                                               
001704   cfdd     MOVFF     0xfdd,0x11                                                                                      
001706   f011                                                                                                               
001708   0e0a     MOVLW     0xa                                                                                             
00170a   0211     MULWF     0x11,0x0                                                                                        
00170c   cff3     MOVFF     0xff3,0x11                                                                                      
00170e   f011                                                                                                               
001710   0210     MULWF     0x10,0x0                                                                                        
001712   cff3     MOVFF     0xff3,0x10                                                                                      
001714   f010                                                                                                               
001716   50f4     MOVF      0xf4,0x0,0x0                                                                                    
001718   2611     ADDWF     0x11,0x1,0x0                                                                                    
00171a   0e04     MOVLW     0x4                                                                                             
00171c   90d8     BCF       0xd8,0x0,0x0                                                                                    
00171e   3211     RRCF      0x11,0x1,0x0                                                                                    
001720   3210     RRCF      0x10,0x1,0x0                                                                                    
001722   04e8     DECF      0xe8,0x0,0x0                                                                                    
001724   e1fb     BNZ       0x171c                                                                                          
001726   c010     MOVFF     0x10,0xfde                                                                                      
001728   ffde                                                                                                               
00172a   c011     MOVFF     0x11,0xfdd                                                                                      
00172c   ffdd                                                                                                               
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               /* Populate string */                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00172e   0e04     MOVLW     0x4                for(i=4;i>0;i--)                                                             C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001730   6ef3     MOVWF     0xf3,0x0                                                                                        
001732   0e02     MOVLW     0x2                                                                                             
001734   cff3     MOVFF     0xff3,0xfdb                                                                                     
001736   ffdb                                                                                                               
001738   50db     MOVF      0xdb,0x0,0x0                                                                                    
00173a   0800     SUBLW     0x0                                                                                             
00173c   e233     BC        0x17a4                                                                                          
00179e   0e02     MOVLW     0x2                                                                                             
0017a0   06db     DECF      0xdb,0x1,0x0                                                                                    
0017a2   d7ca     BRA       0x1738                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00173e   cfde     MOVFF     0xfde,0x10             tempString[i] = (((char)(temp._word % 10)) & 0x0F) | 0x30;               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
001740   f010                                                                                                               
001742   cfdd     MOVFF     0xfdd,0x11                                                                                      
001744   f011                                                                                                               
001746   0e0a     MOVLW     0xa                                                                                             
001748   6e0b     MOVWF     0xb,0x0                                                                                         
00174a   6a0c     CLRF      0xc,0x0                                                                                         
00174c   c010     MOVFF     0x10,0x6                                                                                        
00174e   f006                                                                                                               
001750   c011     MOVFF     0x11,0x7                                                                                        
001752   f007                                                                                                               
001754   ec1e     CALL      0x1a3c,0x0                                                                                      
001756   f00d                                                                                                               
001758   c002     MOVFF     0x2,0x10                                                                                        
00175a   f010                                                                                                               
00175c   c003     MOVFF     0x3,0x11                                                                                        
00175e   f011                                                                                                               
001760   0e0f     MOVLW     0xf                                                                                             
001762   1410     ANDWF     0x10,0x0,0x0                                                                                    
001764   0930     IORLW     0x30                                                                                            
001766   6ee6     MOVWF     0xe6,0x0                                                                                        
001768   0e02     MOVLW     0x2                                                                                             
00176a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00176c   6aea     CLRF      0xea,0x0                                                                                        
00176e   0f02     ADDLW     0x2                                                                                             
001770   6ee9     MOVWF     0xe9,0x0                                                                                        
001772   0e01     MOVLW     0x1                                                                                             
001774   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001776   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001778   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00177a   6eef     MOVWF     0xef,0x0                                                                                        
00177c   cfd9     MOVFF     0xfd9,0xfe9            temp._word /= 10;                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
00177e   ffe9                                                                                                               
001780   cfda     MOVFF     0xfda,0xfea                                                                                     
001782   ffea                                                                                                               
001784   0e0a     MOVLW     0xa                                                                                             
001786   6e0b     MOVWF     0xb,0x0                                                                                         
001788   6a0c     CLRF      0xc,0x0                                                                                         
00178a   cfee     MOVFF     0xfee,0x6                                                                                       
00178c   f006                                                                                                               
00178e   cfed     MOVFF     0xfed,0x7                                                                                       
001790   f007                                                                                                               
001792   ec1e     CALL      0x1a3c,0x0                                                                                      
001794   f00d                                                                                                               
001796   c006     MOVFF     0x6,0xfee                                                                                       
001798   ffee                                                                                                               
00179a   c007     MOVFF     0x7,0xfed                                                                                       
00179c   ffed                                                                                                               
                                               }//end for                                                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               /* Turn leading zeros into spaces */                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017a4   0e30     MOVLW     0x30               if(tempString[1] == '0')                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017a6   0101     MOVLB     0x1                                                                                             
0017a8   5d03     SUBWF     0x3,0x0,0x1                                                                                     
0017aa   e107     BNZ       0x17ba                                                                                          
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017ac   0e20     MOVLW     0x20                   tempString[1] = ' ';                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017ae   6f03     MOVWF     0x3,0x1                                                                                         
0017b0   0e30     MOVLW     0x30                   if(tempString[2] == '0')                                                 C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017b2   5d04     SUBWF     0x4,0x0,0x1                                                                                     
0017b4   e102     BNZ       0x17ba                                                                                          
0017b6   0e20     MOVLW     0x20                       tempString[2] = ' ';                                                 C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017b8   6f04     MOVWF     0x4,0x1                                                                                         
                                               }//end if                                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               /* Adjust decimal digit */                                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017ba   c106     MOVFF     0x106,0x107        tempString[5] = tempString[4];                                               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017bc   f107                                                                                                               
0017be   0e2e     MOVLW     0x2e               tempString[4]='.';                                                           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017c0   6f06     MOVWF     0x6,0x1                                                                                         
0017c2   0ef8     MOVLW     0xf8               tempString[6]=0xF8;     // Degree symbol                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017c4   6f08     MOVWF     0x8,0x1                                                                                         
0017c6   0e43     MOVLW     0x43               tempString[7]='C';                                                           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017c8   6f09     MOVWF     0x9,0x1                                                                                         
0017ca   0e0d     MOVLW     0xd                tempString[8]='\r';                                                          C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017cc   6f0a     MOVWF     0xa,0x1                                                                                         
0017ce   6b0b     CLRF      0xb,0x1            tempString[9]=0x00;     // Null-Terminated                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017d0   0e03     MOVLW     0x3            }//end UpdateCelsiusASCII                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
0017d2   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0017d4   e202     BC        0x17da                                                                                          
0017d6   6ae1     CLRF      0xe1,0x0                                                                                        
0017d8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0017da   6ee1     MOVWF     0xe1,0x0                                                                                        
0017dc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0017de   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0017e0   ffd9                                                                                                               
0017e2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #else                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           // This function is used when a real temp sensor is not available.               C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           // It updates tempString with hardcoded data for demo purposes.                  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           void UpdateCelsiusASCII(void)                                                    C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           {                                                                                C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[0] = '+';                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[1] = ' ';                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[2] = '2';                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[3] = '5';                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[4]='.';                                                           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               // Simulate a slight change in temperature reading                           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               if(tempString[5] == '1')                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                   tempString[5] = '2';                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               else                                                                         C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               {                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                   tempString[5] = '1';                                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               }                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[6]=0xF8;     // Degree symbol                                     C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[7]='C';                                                           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[8]='\r';                                                          C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                               tempString[9]=0x00;     // Null-Terminated                                   C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           }//end UpdateCelsiusASCII                                                        C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           #endif                                                                           C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                                                                                            C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                           /** EOF temperature.c ********************************************************/  C:\MCHPFSUSB\fw\Cdc\user\temperature.c
                                                   LIST P=18F4550                                                           C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   LIST                                                                     C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\PROC\p18f4550.asm
                                           /*** Unsigned Integer Division: 16-bit by 16-bit                                 C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                            ***                                                                             C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                            *** Optimized: Dec. 21, 2000                                                    C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                            ***        by: Daniel R. Madill, Quanser Consulting Inc.                        C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                            ***       for: Saved (for the worst case) at least 5*16 = 80 instruction cycles C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                            ***            over the code supplied with MCC18 v1.00.12                       C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                            ***/                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           void FXD1616U (/*unsigned arg0, unsigned arg1*/)                                 C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           {                                                                                C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                             // use INDF1 for the counter...                                                C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                 _asm                                                                       C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                               // REM = 0                                                                   C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a3c   6a03     CLRF      0x3,0x0            clrf __REMB0, 0                                                              C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a3e   6a02     CLRF      0x2,0x0            clrf __REMB1, 0                                                              C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                               // INDF1 = 16                                                                C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a40   0e10     MOVLW     0x10               movlw 16                                                                     C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a42   6ee7     MOVWF     0xe7,0x0           movwf INDF1, 0                                                               C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                               // Clear the carry                                                           C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a44   90d8     BCF       0xd8,0x0,0x0   	bcf STATUS, 0, 0                                                                C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           loop:                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           	//AARG16 <<= 1; Carry is always clear at this point.                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a46   3606     RLCF      0x6,0x1,0x0    	rlcf __AARGB1, 1, 0                                                             C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a48   3607     RLCF      0x7,0x1,0x0    	rlcf __AARGB0, 1, 0                                                             C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           	//PROD = (PROD << 1) | (AARG16 >> 16)                                           C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a4a   3602     RLCF      0x2,0x1,0x0    	rlcf __REMB1, 1, 0                                                              C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a4c   3603     RLCF      0x3,0x1,0x0    	rlcf __REMB0, 1, 0                                                              C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           	                                                                                C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           	//if (PROD >= BARG16)                                                           C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a4e   500b     MOVF      0xb,0x0,0x0    	movf __BARGB1, 0, 0                                                             C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a50   5c02     SUBWF     0x2,0x0,0x0    	subwf __REMB1, 0, 0                                                             C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a52   500c     MOVF      0xc,0x0,0x0    	movf __BARGB0, 0, 0                                                             C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a54   5803     SUBWFB    0x3,0x0,0x0    	subwfb __REMB0, 0, 0                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a56   e305     BNC       0x1a62         	bnc endloop                                                                     C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                               //{                                                                          C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           	    //PROD -= BARG16;                                                           C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a58   500b     MOVF      0xb,0x0,0x0    	    movf __BARGB1, 0, 0                                                         C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a5a   5e02     SUBWF     0x2,0x1,0x0    	    subwf __REMB1, 1, 0                                                         C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a5c   500c     MOVF      0xc,0x0,0x0    	    movf __BARGB0, 0, 0                                                         C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a5e   5a03     SUBWFB    0x3,0x1,0x0    	    subwfb __REMB0, 1, 0                                                        C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           	    //++AARG16; Since AARG16 was shift to the left above, the increment will    C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                   //          simply set the LSbit. Using incf also clears the carry, which C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                   //          means we don't have to clear the carry at the top of the loop. C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a60   2a06     INCF      0x6,0x1,0x0            incf __AARGB1, 1, 0                                                      C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                               //}                                                                          C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           endloop:                                                                         C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a62   2ee7     DECFSZ    0xe7,0x1,0x0       decfsz INDF1, 1, 0    // does not affect the carry bit                       C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a64   d7f0     BRA       0x1a46             bra loop                                                                     C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                             _endasm                                                                        C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                             /* result in AARG already... */                                                C:\MCC18\src\TRADIT~1\math\fxd1616u.c
001a66   0012     RETURN    0x0            }                                                                                C:\MCC18\src\TRADIT~1\math\fxd1616u.c
                                           /* $Id: spi_open.c,v 1.3 2007/03/01 21:50:32 curtiss Exp $ */                    C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #include <spi.h>                                                                 C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           /********************************************************************            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Function Name:  OpenSPI                                         *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Return Value:   void                                            *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Parameters:     SSP peripheral setup bytes                      *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *   Description:    This function sets up the SSP module on a       *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *                   PIC18Cxxx device for use with a Microchip SPI   *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           *                   EEPROM device or SPI bus device.                *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           ********************************************************************/            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001950   cfd9     MOVFF     0xfd9,0xfe6    void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001952   ffe6                                                                                                               
001954   cfda     MOVFF     0xfda,0xfe6                                                                                     
001956   ffe6                                                                                                               
001958   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00195a   ffd9                                                                                                               
00195c   cfe2     MOVFF     0xfe2,0xfda                                                                                     
00195e   ffda                                                                                                               
                                           {                                                                                C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001960   0e3f     MOVLW     0x3f             SSPSTAT &= 0x3F;                // power on state                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001962   16c7     ANDWF     0xc7,0x1,0x0                                                                                    
001964   6ac6     CLRF      0xc6,0x0         SSPCON1 = 0x00;                 // power on state                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001966   0efd     MOVLW     0xfd             SSPCON1 |= sync_mode;           // select serial mode                          C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001968   50db     MOVF      0xdb,0x0,0x0                                                                                    
00196a   12c6     IORWF     0xc6,0x1,0x0                                                                                    
00196c   0efb     MOVLW     0xfb             SSPSTAT |= smp_phase;           // select data input sample phase              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
00196e   50db     MOVF      0xdb,0x0,0x0                                                                                    
001970   12c7     IORWF     0xc7,0x1,0x0                                                                                    
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001972   0efc     MOVLW     0xfc             switch( bus_mode )                                                             C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001974   50db     MOVF      0xdb,0x0,0x0                                                                                    
001976   0a03     XORLW     0x3                                                                                             
001978   e009     BZ        0x198c                                                                                          
00197a   0a01     XORLW     0x1                                                                                             
00197c   e004     BZ        0x1986                                                                                          
00197e   0a02     XORLW     0x2                                                                                             
001980   e106     BNZ       0x198e                                                                                          
                                             {                                                                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001982   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001984   d004     BRA       0x198e               break;                                                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001986   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001988   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
00198a   d001     BRA       0x198e               break;                                                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
00198c   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
00198e   0efd     MOVLW     0xfd             switch( sync_mode )                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
001990   50db     MOVF      0xdb,0x0,0x0                                                                                    
001992   0a05     XORLW     0x5                                                                                             
001994   e003     BZ        0x199c                                                                                          
001996   0a01     XORLW     0x1                                                                                             
001998   e104     BNZ       0x19a2                                                                                          
                                             {                                                                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F6310)  || defined(__18F6390)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F6410)  || defined(__18F6490)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F8310)  || defined(__18F8390)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F8410)  || defined(__18F8490)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F6527)  || defined(__18F6622)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F6627)  || defined(__18F6722)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F8527)  || defined(__18F8622)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F8627)  || defined(__18F8722)  || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F65J10) || defined(__18F65J15) || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F66J10) || defined(__18F66J15) || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F67J10) || defined(__18F85J10) || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F85J15) || defined(__18F86J10) || \                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F86J15) || defined(__18F87J10)                                   C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 TRISFbits.TRISF7 = 1;       // define /SS pin as input                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #elif defined(__18F23K20) || defined(__18F24K20) || \                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 defined(__18F25K20) || defined(__18F26K20) || \                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 defined(__18F43K20) || defined(__18F44K20) || \                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 defined(__18F45K20) || defined(__18F46K20)                                 C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                    C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 ANSELbits.ANS4 = 0;         // disable analog function                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
00199a   8a92     BSF       0x92,0x5,0x0         TRISAbits.TRISA5 = 1;       // define /SS pin as input                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               case 5:                       // slave mode w/o /SS enable                   C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
00199c   8293     BSF       0x93,0x1,0x0         TRISBbits.TRISB1 = 1;       // define clock pin as input                   C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 TRISCbits.TRISC3 = 1;       // define clock pin as input                   C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
00199e   9ec7     BCF       0xc7,0x7,0x0         SSPSTATbits.SMP = 0;        // must be cleared in slave SPI mode           C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
0019a0   d001     BRA       0x19a4               break;                                                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               default:                      // master mode, define clock pin as output     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
0019a2   9293     BCF       0x93,0x1,0x0         TRISBbits.TRISB1 = 0;       // define clock pin as output                  C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 TRISCbits.TRISC3 = 0;       // define clock pin as output                  C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #if defined(__18F2455) || defined(__18F2550) || \                                C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                               defined(__18F4455) || defined(__18F4550)                                     C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
0019a4   9e94     BCF       0x94,0x7,0x0     TRISC &= 0x7F;                  // define SDO as output (master or slave)      C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
0019a6   8093     BSF       0x93,0x0,0x0     TRISB |= 0x01;                  // define SDI as input (master or slave)       C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #else                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             TRISC &= 0xDF;                  // define SDO as output (master or slave)      C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                             TRISC |= 0x10;                  // define SDI as input (master or slave)       C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
                                           #endif                                                                           C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
0019a8   8ac6     BSF       0xc6,0x5,0x0     SSPCON1 |= SSPENB;              // enable synchronous serial port              C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
0019aa   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\MCC18\src\TRADIT~1\pmc\SPI\spi_open.c
0019ac   cfe5     MOVFF     0xfe5,0xfda                                                                                     
0019ae   ffda                                                                                                               
0019b0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0019b2   ffd9                                                                                                               
0019b4   0012     RETURN    0x0                                                                                             
                                           /* $Id: spi_read.c,v 1.1 2004/10/06 23:00:51 curtiss Exp $ */                    C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           #include <spi.h>                                                                 C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           /********************************************************************            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Function Name:    ReadSPI                                     *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Return Value:     contents of SSPBUF register                 *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Parameters:       void                                        *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           *     Description:      Read single byte from SPI bus.              *            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           ********************************************************************/            C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           unsigned char ReadSPI( void )                                                    C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           {                                                                                C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
001ab6   6ac9     CLRF      0xc9,0x0         SSPBUF = 0x00;                  // initiate bus cycle                          C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
001ab8   a0c7     BTFSS     0xc7,0x0,0x0     while ( !SSPSTATbits.BF );      // wait until cycle complete                   C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
001aba   d7fe     BRA       0x1ab8                                                                                          
001abc   50c9     MOVF      0xc9,0x0,0x0     return ( SSPBUF );              // return with byte read                       C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
001abe   0012     RETURN    0x0            }                                                                                C:\MCC18\src\TRADIT~1\pmc\SPI\spi_read.c
                                           ;	RCS Header $Id: aarg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB3                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB7		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB2                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB6		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB1                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB5		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __REMB0                                                                          C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB4		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB3		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB2		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB1		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AARGB0		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           __AEXP		RES 1       ; 8 bit biased exponent for argument A                       C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL	__AARGB0, __AARGB1, __AARGB2, __AARGB3                                   C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   GLOBAL  __AARGB4, __AARGB5, __AARGB6, __AARGB7                           C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  __AEXP                                                                  C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           	GLOBAL  __REMB3, __REMB2, __REMB1, __REMB0                                      C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\aarg.asm
                                           ;	RCS Header $Id: barg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB3		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB2		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB1		RES 1                                                                  C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BARGB0		RES 1       ; most significant byte of argument B                      C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           __BEXP		RES 1       ; 8 bit biased exponent for argument B                       C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  __BARGB3, __BARGB2, __BARGB1, __BARGB0                           C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   GLOBAL  __BEXP                                                           C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\barg.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.5 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           __FPFLAGSbits                                                                    C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           __FPFLAGS		RES 1       ; floating point library exception flags                  C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   GLOBAL  SIGN, __FPFLAGS, __FPFLAGSbits                                   C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                           	                                                                                C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                   END                                                                      C:\MCC18\SRC\TRADIT~1\MATH\cmath18.asm
                                                                                                                            C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                           /** @name __init                                                                 C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                            * The {\bf __init} is called if the linker can not find a                       C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                            * user defined version for it                                                   C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                            */                                                                              C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                                                                                                            C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                           void __init (void)                                                               C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                           {                                                                                C:\MCC18\src\TRADIT~1\stdclib\__init.c
001ac0   0012     RETURN    0x0            }                                                                                C:\MCC18\src\TRADIT~1\stdclib\__init.c
                                                                                                                            C:\MCC18\src\TRADIT~1\stdclib\__init.c
